[2025-12-03 21:56:22] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-03 21:56:22] INFO     - aegis.node - Initializing node: Hospital_A (c4005f99...)
[2025-12-03 21:56:22] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-03 21:56:22] INFO     - aegis.audit - Genesis block created
[2025-12-03 21:56:22] INFO     - aegis.node - Loading CSV: hospital_a.csv
[2025-12-03 21:56:22] INFO     - aegis.csv_loader - Loading CSV: hospital_a.csv
[2025-12-03 21:56:22] INFO     - aegis.csv_loader - Data loaded: 1000 samples, 8 features
[2025-12-03 21:56:22] INFO     - aegis.node - Loaded 1000 samples, 8 features
[2025-12-03 21:56:22] INFO     - aegis.medical.model - Initialized logistic regression model: 8 features
[2025-12-03 21:56:22] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-03 21:56:22] INFO     - aegis.node - Node initialization complete
[2025-12-03 21:56:22] INFO     - aegis.peer.5000 - Peer manager started on 0.0.0.0:5000
[2025-12-03 21:56:22] INFO     - aegis.node - Network created: 9251d0c9fcf54af5ceef956c04b01a8f
[2025-12-03 21:56:22] INFO     - aegis.main - ============================================================
[2025-12-03 21:56:22] INFO     - aegis.main - NETWORK ID: 9251d0c9fcf54af5ceef956c04b01a8f
[2025-12-03 21:56:22] INFO     - aegis.main - ============================================================
[2025-12-03 21:56:22] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-03 21:56:22] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-03 21:57:29] INFO     - aegis.main - Initializing node: Hospital_B on port 5001
[2025-12-03 21:57:29] INFO     - aegis.node - Initializing node: Hospital_B (9de472b5...)
[2025-12-03 21:57:29] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-03 21:57:29] INFO     - aegis.audit - Genesis block created
[2025-12-03 21:57:29] INFO     - aegis.node - Generating synthetic data
[2025-12-03 21:57:29] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-03 21:57:29] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-03 21:57:29] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-03 21:57:29] INFO     - aegis.node - Node initialization complete
[2025-12-03 21:57:29] INFO     - aegis.peer.5001 - Peer manager started on 0.0.0.0:5001
[2025-12-03 21:57:30] INFO     - aegis.node - Joined network: 9251d0c9fcf54af5ceef956c04b01a8f
[2025-12-03 21:57:30] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-03 21:57:30] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-03 21:57:45] INFO     - aegis.peer.5000 - Added peer 9de472b5ddefa7145a6a4b0b77bd74700f373c88e9d1e60593d4f0362499c2f5 at http://localhost:5001
[2025-12-03 21:57:45] INFO     - aegis.node - Connected to peer: http://localhost:5001
[2025-12-03 21:58:25] INFO     - aegis.node - Connected to peer: http://localhost:5001
[2025-12-03 21:58:37] INFO     - aegis.peer.5001 - Added peer c4005f998af5fe148c1bd542c5fa480d37facd2b6798fd325d20d142aafa9469 at http://localhost:5000
[2025-12-03 21:58:37] INFO     - aegis.node - Connected to peer: http://localhost:5000
[2025-12-03 21:58:52] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-03 21:58:52] INFO     - aegis.node - Budget per round: ε=2.000000, δ=2.000000e-06
[2025-12-03 21:58:52] INFO     - aegis.node - Step 1/5: Local training
[2025-12-03 21:58:52] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-03 21:58:52] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-03 21:58:52] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-03 21:58:55] INFO     - aegis.aggregation - Key exchange complete: 0 shared secrets
[2025-12-03 21:58:55] WARNING  - aegis.aggregation - No shared secrets established
[2025-12-03 21:59:08] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=8
[2025-12-03 21:59:08] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-03 21:59:08] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-03 21:59:16] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.5 total votes, threshold 100.0% not met
[2025-12-03 21:59:16] ERROR    - aegis.consensus - Vote phase failed
[2025-12-03 21:59:16] INFO     - aegis.node - Round 1: Acc=0.777, F1=0.139
[2025-12-03 21:59:16] INFO     - aegis.node - Step 1/5: Local training
[2025-12-03 21:59:16] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-03 21:59:16] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-03 21:59:16] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-03 21:59:16] WARNING  - aegis.anomaly_detector - Distribution shift: ['heart_rate', 'bmi']
[2025-12-03 21:59:16] INFO     - aegis.anomaly_detector - Analysis complete: 640/1000 anomalies
[2025-12-03 21:59:16] INFO     - aegis.node - Anomalies: critical, rate=64.00%
[2025-12-03 21:59:16] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-03 21:59:16] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-03 21:59:16] WARNING  - aegis.aggregation - No shared secrets established
[2025-12-03 21:59:29] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=8
[2025-12-03 21:59:29] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-03 21:59:29] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-03 21:59:37] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.5 total votes, threshold 100.0% not met
[2025-12-03 21:59:37] ERROR    - aegis.consensus - Vote phase failed
[2025-12-03 21:59:37] INFO     - aegis.node - Round 2: Acc=0.845, F1=0.180
[2025-12-03 21:59:37] INFO     - aegis.node - Step 1/5: Local training
[2025-12-03 21:59:37] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-03 21:59:37] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-03 21:59:37] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-03 21:59:37] INFO     - aegis.anomaly_detector - Analysis complete: 211/1000 anomalies
[2025-12-03 21:59:37] INFO     - aegis.node - Anomalies: critical, rate=21.10%
[2025-12-03 21:59:37] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-03 21:59:37] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-03 21:59:37] WARNING  - aegis.aggregation - No shared secrets established
[2025-12-03 21:59:50] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=8
[2025-12-03 21:59:50] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-03 21:59:50] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-03 21:59:58] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.5 total votes, threshold 100.0% not met
[2025-12-03 21:59:58] ERROR    - aegis.consensus - Vote phase failed
[2025-12-03 21:59:58] INFO     - aegis.node - Round 3: Acc=0.871, F1=0.303
[2025-12-03 21:59:58] INFO     - aegis.node - Step 1/5: Local training
[2025-12-03 21:59:58] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-03 21:59:58] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-03 21:59:58] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-03 21:59:58] INFO     - aegis.anomaly_detector - Analysis complete: 298/1000 anomalies
[2025-12-03 21:59:58] INFO     - aegis.node - Anomalies: critical, rate=29.80%
[2025-12-03 21:59:58] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-03 21:59:58] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-03 21:59:58] WARNING  - aegis.aggregation - No shared secrets established
[2025-12-03 22:00:11] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=8
[2025-12-03 22:00:11] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-03 22:00:11] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-03 22:00:19] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.5 total votes, threshold 100.0% not met
[2025-12-03 22:00:19] ERROR    - aegis.consensus - Vote phase failed
[2025-12-03 22:00:19] INFO     - aegis.node - Round 4: Acc=0.897, F1=0.391
[2025-12-03 22:00:19] INFO     - aegis.node - Step 1/5: Local training
[2025-12-03 22:00:19] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-03 22:00:19] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-03 22:00:19] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-03 22:00:19] INFO     - aegis.anomaly_detector - Analysis complete: 266/1000 anomalies
[2025-12-03 22:00:19] INFO     - aegis.node - Anomalies: critical, rate=26.60%
[2025-12-03 22:00:19] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-03 22:00:19] WARNING  - aegis.privacy.dp - Requested ε=2.0000, δ=2.0000e-06 exceeds budget. Using remaining: ε=2.0000, δ=2.0000e-06
[2025-12-03 22:00:19] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-03 22:00:19] WARNING  - aegis.aggregation - No shared secrets established
[2025-12-03 22:00:32] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=8
[2025-12-03 22:00:32] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-03 22:00:32] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-03 22:00:41] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.5 total votes, threshold 100.0% not met
[2025-12-03 22:00:41] ERROR    - aegis.consensus - Vote phase failed
[2025-12-03 22:00:41] INFO     - aegis.node - Round 5: Acc=0.895, F1=0.295
[2025-12-03 22:00:41] INFO     - aegis.node - Federated training complete
[2025-12-03 22:02:23] INFO     - aegis.node - Starting federated training: 1 rounds
[2025-12-03 22:02:23] INFO     - aegis.node - Budget per round: ε=10.000000, δ=1.000000e-05
[2025-12-03 22:02:23] INFO     - aegis.node - Step 1/5: Local training
[2025-12-03 22:02:23] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-03 22:02:23] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-03 22:02:23] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 11:26:24] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-04 11:26:24] INFO     - aegis.node - Initializing node: Hospital_A (93c0506d...)
[2025-12-04 11:26:24] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 11:26:24] INFO     - aegis.audit - Genesis block created
[2025-12-04 11:26:24] INFO     - aegis.node - Generating synthetic data
[2025-12-04 11:26:24] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 11:26:24] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 11:26:24] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 11:26:24] DEBUG    - aegis.node - All components initialized
[2025-12-04 11:26:24] INFO     - aegis.node - Node initialization complete
[2025-12-04 11:26:24] INFO     - aegis.peer.5000 - Peer manager started on 0.0.0.0:5000
[2025-12-04 11:26:24] INFO     - aegis.node - Network created: 1b9407a7e6c4211e98e6cdaae9972a78
[2025-12-04 11:26:24] INFO     - aegis.main - ============================================================
[2025-12-04 11:26:24] INFO     - aegis.main - NETWORK ID: 1b9407a7e6c4211e98e6cdaae9972a78
[2025-12-04 11:26:24] INFO     - aegis.main - ============================================================
[2025-12-04 11:26:24] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 11:26:24] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 13:34:54] INFO     - aegis.main - Initializing node: Hospital_B on port 5001
[2025-12-04 13:34:54] INFO     - aegis.node - Initializing node: Hospital_B (3fdd2dc2...)
[2025-12-04 13:34:54] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 13:34:55] INFO     - aegis.audit - Genesis block created
[2025-12-04 13:34:55] INFO     - aegis.node - Generating synthetic data
[2025-12-04 13:34:55] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 13:34:55] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 13:34:55] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 13:34:55] INFO     - aegis.node - Node initialization complete
[2025-12-04 13:34:55] INFO     - aegis.peer.5001 - Peer manager started on 0.0.0.0:5001
[2025-12-04 13:34:55] INFO     - aegis.node - Joined network: 1b9407a7e6c4211e98e6cdaae9972a78
[2025-12-04 13:34:55] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 13:34:55] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 13:36:01] INFO     - aegis.node - Connected to peer: http://localhost:5001
[2025-12-04 13:36:16] INFO     - aegis.peer.5001 - Added peer 93c0506d61e62042d350c7d802d09545ff28320837d395f0440a07ae2bfcc1cd at http://localhost:5000
[2025-12-04 13:36:16] INFO     - aegis.node - Connected to peer: http://localhost:5000
[2025-12-04 13:36:27] DEBUG    - aegis.node - Got peer ID from health check: 3fdd2dc258dcabfa...
[2025-12-04 13:36:27] INFO     - aegis.peer.5000 - Added peer 3fdd2dc258dcabfab53a4c87bd8a226a690bdea8f2220f8083c157b91ecc5568 at http://localhost:5001
[2025-12-04 13:36:27] INFO     - aegis.node - Connected to peer: http://localhost:5001
[2025-12-04 13:36:35] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-04 13:36:35] INFO     - aegis.node - Budget per round: ε=2.000000, δ=2.000000e-06
[2025-12-04 13:36:35] DEBUG    - aegis.node - Starting: Round 1
[2025-12-04 13:36:35] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 13:36:35] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 13:36:35] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 13:36:35] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 13:36:38] INFO     - aegis.aggregation - Key exchange complete: 0 shared secrets
[2025-12-04 13:36:38] WARNING  - aegis.aggregation - No shared secrets established
[2025-12-04 13:36:51] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-04 13:36:51] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-04 13:36:51] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-04 13:36:59] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.5 total votes, threshold 100.0% not met
[2025-12-04 13:36:59] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 13:36:59] INFO     - aegis.node - Round 1: Acc=0.687, F1=0.000
[2025-12-04 13:36:59] DEBUG    - aegis.node - Completed: Round 1 in 24.151s
[2025-12-04 13:36:59] DEBUG    - aegis.node - Starting: Round 2
[2025-12-04 13:36:59] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 13:36:59] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 13:36:59] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 13:36:59] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 13:36:59] ERROR    - aegis.node - Error in round 2: 'feature_q25'
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 228, in run_federated_training
    anomaly_results = self.anomaly_detector.comprehensive_analysis(X, y)
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 188, in comprehensive_analysis
    iqr_mask, iqr_scores = self.detect_iqr_anomalies(data)
                           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 54, in detect_iqr_anomalies
    q25 = np.array(self.network_stats['feature_q25'])
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'feature_q25'
[2025-12-04 13:36:59] DEBUG    - aegis.node - Completed: Round 2 in 0.055s
[2025-12-04 13:36:59] DEBUG    - aegis.node - Starting: Round 3
[2025-12-04 13:36:59] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 13:36:59] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 13:36:59] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 13:36:59] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 13:36:59] ERROR    - aegis.node - Error in round 3: 'feature_q25'
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 228, in run_federated_training
    anomaly_results = self.anomaly_detector.comprehensive_analysis(X, y)
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 188, in comprehensive_analysis
    iqr_mask, iqr_scores = self.detect_iqr_anomalies(data)
                           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 54, in detect_iqr_anomalies
    q25 = np.array(self.network_stats['feature_q25'])
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'feature_q25'
[2025-12-04 13:36:59] DEBUG    - aegis.node - Completed: Round 3 in 0.012s
[2025-12-04 13:36:59] DEBUG    - aegis.node - Starting: Round 4
[2025-12-04 13:36:59] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 13:36:59] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 13:36:59] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 13:36:59] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 13:36:59] ERROR    - aegis.node - Error in round 4: 'feature_q25'
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 228, in run_federated_training
    anomaly_results = self.anomaly_detector.comprehensive_analysis(X, y)
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 188, in comprehensive_analysis
    iqr_mask, iqr_scores = self.detect_iqr_anomalies(data)
                           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 54, in detect_iqr_anomalies
    q25 = np.array(self.network_stats['feature_q25'])
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'feature_q25'
[2025-12-04 13:36:59] DEBUG    - aegis.node - Completed: Round 4 in 0.013s
[2025-12-04 13:36:59] DEBUG    - aegis.node - Starting: Round 5
[2025-12-04 13:36:59] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 13:36:59] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 13:36:59] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 13:36:59] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 13:36:59] ERROR    - aegis.node - Error in round 5: 'feature_q25'
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 228, in run_federated_training
    anomaly_results = self.anomaly_detector.comprehensive_analysis(X, y)
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 188, in comprehensive_analysis
    iqr_mask, iqr_scores = self.detect_iqr_anomalies(data)
                           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 54, in detect_iqr_anomalies
    q25 = np.array(self.network_stats['feature_q25'])
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'feature_q25'
[2025-12-04 13:36:59] DEBUG    - aegis.node - Completed: Round 5 in 0.007s
[2025-12-04 13:36:59] INFO     - aegis.node - Federated training complete
[2025-12-04 13:37:12] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-04 13:37:12] INFO     - aegis.node - Budget per round: ε=1.600000, δ=1.600000e-06
[2025-12-04 13:37:12] DEBUG    - aegis.node - Starting: Round 1
[2025-12-04 13:37:12] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 13:37:12] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 13:37:12] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 13:37:12] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 13:37:15] INFO     - aegis.aggregation - Key exchange complete: 0 shared secrets
[2025-12-04 13:37:15] WARNING  - aegis.aggregation - No shared secrets established
[2025-12-04 13:37:28] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-04 13:37:28] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-04 13:37:28] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-04 13:37:36] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.5 total votes, threshold 100.0% not met
[2025-12-04 13:37:36] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 13:37:36] INFO     - aegis.node - Round 1: Acc=0.687, F1=0.000
[2025-12-04 13:37:36] DEBUG    - aegis.node - Completed: Round 1 in 24.074s
[2025-12-04 13:37:36] DEBUG    - aegis.node - Starting: Round 2
[2025-12-04 13:37:36] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 13:37:36] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 13:37:36] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 13:37:36] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 13:37:36] ERROR    - aegis.node - Error in round 2: 'feature_q25'
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 228, in run_federated_training
    anomaly_results = self.anomaly_detector.comprehensive_analysis(X, y)
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 188, in comprehensive_analysis
    iqr_mask, iqr_scores = self.detect_iqr_anomalies(data)
                           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 54, in detect_iqr_anomalies
    q25 = np.array(self.network_stats['feature_q25'])
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'feature_q25'
[2025-12-04 13:37:36] DEBUG    - aegis.node - Completed: Round 2 in 0.027s
[2025-12-04 13:37:36] DEBUG    - aegis.node - Starting: Round 3
[2025-12-04 13:37:36] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 13:37:36] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 13:37:36] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 13:37:36] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 13:37:36] ERROR    - aegis.node - Error in round 3: 'feature_q25'
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 228, in run_federated_training
    anomaly_results = self.anomaly_detector.comprehensive_analysis(X, y)
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 188, in comprehensive_analysis
    iqr_mask, iqr_scores = self.detect_iqr_anomalies(data)
                           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 54, in detect_iqr_anomalies
    q25 = np.array(self.network_stats['feature_q25'])
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'feature_q25'
[2025-12-04 13:37:36] DEBUG    - aegis.node - Completed: Round 3 in 0.008s
[2025-12-04 13:37:36] DEBUG    - aegis.node - Starting: Round 4
[2025-12-04 13:37:36] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 13:37:36] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 13:37:36] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 13:37:36] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 13:37:36] ERROR    - aegis.node - Error in round 4: 'feature_q25'
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 228, in run_federated_training
    anomaly_results = self.anomaly_detector.comprehensive_analysis(X, y)
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 188, in comprehensive_analysis
    iqr_mask, iqr_scores = self.detect_iqr_anomalies(data)
                           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 54, in detect_iqr_anomalies
    q25 = np.array(self.network_stats['feature_q25'])
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'feature_q25'
[2025-12-04 13:37:36] DEBUG    - aegis.node - Completed: Round 4 in 0.008s
[2025-12-04 13:37:36] DEBUG    - aegis.node - Starting: Round 5
[2025-12-04 13:37:36] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 13:37:36] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 13:37:36] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 13:37:36] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 13:37:36] ERROR    - aegis.node - Error in round 5: 'feature_q25'
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 228, in run_federated_training
    anomaly_results = self.anomaly_detector.comprehensive_analysis(X, y)
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 188, in comprehensive_analysis
    iqr_mask, iqr_scores = self.detect_iqr_anomalies(data)
                           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/home/liminal_mradul/aegis (Copy)/src/advanced/anomaly_detector.py", line 54, in detect_iqr_anomalies
    q25 = np.array(self.network_stats['feature_q25'])
                   ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
KeyError: 'feature_q25'
[2025-12-04 13:37:36] DEBUG    - aegis.node - Completed: Round 5 in 0.005s
[2025-12-04 13:37:36] INFO     - aegis.node - Federated training complete
[2025-12-04 13:48:51] INFO     - aegis.node - Shutting down
[2025-12-04 13:48:54] INFO     - aegis.node - Shutting down
[2025-12-04 13:57:52] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-04 13:57:52] INFO     - aegis.node - Initializing node: Hospital_A (d99571f6...)
[2025-12-04 13:57:52] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 13:57:52] INFO     - aegis.audit - Genesis block created
[2025-12-04 13:57:52] INFO     - aegis.node - Generating synthetic data
[2025-12-04 13:57:52] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 13:57:52] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 13:57:52] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 13:57:52] DEBUG    - aegis.node - All components initialized
[2025-12-04 13:57:52] INFO     - aegis.node - Node initialization complete
[2025-12-04 13:57:52] INFO     - aegis.peer.5000 - Peer manager started on 0.0.0.0:5000
[2025-12-04 13:57:53] INFO     - aegis.node - Network created: 1f11072df80744038c3f40b222cc8608
[2025-12-04 13:57:53] INFO     - aegis.main - ============================================================
[2025-12-04 13:57:53] INFO     - aegis.main - NETWORK ID: 1f11072df80744038c3f40b222cc8608
[2025-12-04 13:57:53] INFO     - aegis.main - ============================================================
[2025-12-04 13:57:53] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 13:57:53] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 13:58:27] INFO     - aegis.main - Initializing node: Hospital_B on port 5001
[2025-12-04 13:58:27] INFO     - aegis.node - Initializing node: Hospital_B (692e54a4...)
[2025-12-04 13:58:27] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 13:58:27] INFO     - aegis.audit - Genesis block created
[2025-12-04 13:58:27] INFO     - aegis.node - Generating synthetic data
[2025-12-04 13:58:27] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 13:58:27] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 13:58:27] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 13:58:27] INFO     - aegis.node - Node initialization complete
[2025-12-04 13:58:27] INFO     - aegis.peer.5001 - Peer manager started on 0.0.0.0:5001
[2025-12-04 13:58:28] INFO     - aegis.node - Joined network: 1f11072df80744038c3f40b222cc8608
[2025-12-04 13:58:28] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 13:58:28] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 13:58:38] WARNING  - aegis.node - Could not get peer ID, using random: Invalid URL '1f11072df80744038c3f40b222cc8608/health': No scheme supplied. Perhaps you meant https://1f11072df80744038c3f40b222cc8608/health?
[2025-12-04 13:58:38] INFO     - aegis.peer.5000 - Added peer peer_181ba1d3 at 1f11072df80744038c3f40b222cc8608
[2025-12-04 13:58:38] INFO     - aegis.node - Connected to peer: 1f11072df80744038c3f40b222cc8608
[2025-12-04 13:58:42] ERROR    - aegis.peer.5000 - Error sending to peer_181ba1d3: Invalid URL '1f11072df80744038c3f40b222cc8608/message': No scheme supplied. Perhaps you meant https://1f11072df80744038c3f40b222cc8608/message?
[2025-12-04 13:58:52] ERROR    - aegis.peer.5000 - Error sending to peer_181ba1d3: Invalid URL '1f11072df80744038c3f40b222cc8608/message': No scheme supplied. Perhaps you meant https://1f11072df80744038c3f40b222cc8608/message?
[2025-12-04 13:58:58] INFO     - aegis.node - Shutting down
[2025-12-04 13:59:05] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-04 13:59:05] INFO     - aegis.node - Initializing node: Hospital_A (29a0c47e...)
[2025-12-04 13:59:05] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 13:59:05] INFO     - aegis.audit - Genesis block created
[2025-12-04 13:59:05] INFO     - aegis.node - Generating synthetic data
[2025-12-04 13:59:05] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 13:59:05] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 13:59:05] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 13:59:05] DEBUG    - aegis.node - All components initialized
[2025-12-04 13:59:05] INFO     - aegis.node - Node initialization complete
[2025-12-04 13:59:05] INFO     - aegis.peer.5000 - Peer manager started on 0.0.0.0:5000
[2025-12-04 13:59:06] INFO     - aegis.node - Network created: 096e0f6e14dd614c55b8fc19695f53df
[2025-12-04 13:59:06] INFO     - aegis.main - ============================================================
[2025-12-04 13:59:06] INFO     - aegis.main - NETWORK ID: 096e0f6e14dd614c55b8fc19695f53df
[2025-12-04 13:59:06] INFO     - aegis.main - ============================================================
[2025-12-04 13:59:06] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 13:59:06] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 13:59:07] INFO     - aegis.node - Shutting down
[2025-12-04 13:59:24] INFO     - aegis.main - Initializing node: Hospital_B on port 5001
[2025-12-04 13:59:24] INFO     - aegis.node - Initializing node: Hospital_B (2140e75e...)
[2025-12-04 13:59:24] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 13:59:24] INFO     - aegis.audit - Genesis block created
[2025-12-04 13:59:24] INFO     - aegis.node - Generating synthetic data
[2025-12-04 13:59:24] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 13:59:24] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 13:59:24] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 13:59:24] INFO     - aegis.node - Node initialization complete
[2025-12-04 13:59:24] INFO     - aegis.peer.5001 - Peer manager started on 0.0.0.0:5001
[2025-12-04 13:59:25] INFO     - aegis.node - Joined network: 096e0f6e14dd614c55b8fc19695f53df
[2025-12-04 13:59:25] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 13:59:25] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 13:59:51] DEBUG    - aegis.node - Got peer ID from health check: 2140e75e2d90e3c6...
[2025-12-04 13:59:51] INFO     - aegis.peer.5000 - Added peer 2140e75e2d90e3c6afe7bca5766a9b862d71fa611ec920ac80c2072f5a839733 at http://localhost:5001
[2025-12-04 13:59:51] INFO     - aegis.node - Connected to peer: http://localhost:5001
[2025-12-04 13:59:57] INFO     - aegis.peer.5001 - Added peer 29a0c47e4066e052bb632696332b34517d5775cbf961d1683d63244c06baf1ec at http://localhost:5000
[2025-12-04 13:59:57] INFO     - aegis.node - Connected to peer: http://localhost:5000
[2025-12-04 14:00:06] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-04 14:00:06] INFO     - aegis.node - Budget per round: ε=2.000000, δ=2.000000e-06
[2025-12-04 14:00:06] DEBUG    - aegis.node - Starting: Round 1
[2025-12-04 14:00:06] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 14:00:06] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 14:00:06] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 14:00:06] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 14:00:06] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 14:00:09] INFO     - aegis.aggregation - Key exchange complete: 0 shared secrets
[2025-12-04 14:00:09] WARNING  - aegis.aggregation - No shared secrets established
[2025-12-04 14:00:22] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-04 14:00:22] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-04 14:00:22] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-04 14:16:34] ERROR    - aegis.consensus - Failed: Consensus round after 972.569s - 
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/consensus/protocol.py", line 84, in initiate_consensus
    if not self._phase_vote():
           ~~~~~~~~~~~~~~~~^^
  File "/home/liminal_mradul/aegis (Copy)/src/consensus/protocol.py", line 199, in _phase_vote
    voting_stats = self.voting_manager.get_voting_stats()
  File "/home/liminal_mradul/aegis (Copy)/src/consensus/voting.py", line 202, in get_voting_stats
    'byzantine_tolerance': self.get_byzantine_tolerance()
                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/liminal_mradul/aegis (Copy)/src/consensus/voting.py", line 191, in get_byzantine_tolerance
    with self._lock:
         ^^^^^^^^^^
KeyboardInterrupt
[2025-12-04 14:16:34] ERROR    - aegis.node - Failed: Round 1 after 988.710s - 
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 316, in run_federated_training
    consensus_reached = self.consensus_protocol.initiate_consensus(state_data)
  File "/home/liminal_mradul/aegis (Copy)/src/consensus/protocol.py", line 84, in initiate_consensus
    if not self._phase_vote():
           ~~~~~~~~~~~~~~~~^^
  File "/home/liminal_mradul/aegis (Copy)/src/consensus/protocol.py", line 199, in _phase_vote
    voting_stats = self.voting_manager.get_voting_stats()
  File "/home/liminal_mradul/aegis (Copy)/src/consensus/voting.py", line 202, in get_voting_stats
    'byzantine_tolerance': self.get_byzantine_tolerance()
                           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/liminal_mradul/aegis (Copy)/src/consensus/voting.py", line 191, in get_byzantine_tolerance
    with self._lock:
         ^^^^^^^^^^
KeyboardInterrupt
[2025-12-04 15:06:17] WARNING  - aegis.peer.5001 - Peer 29a0c47e4066e052bb632696332b34517d5775cbf961d1683d63244c06baf1ec appears offline
[2025-12-04 15:06:17] WARNING  - aegis.peer.5000 - Peer 2140e75e2d90e3c6afe7bca5766a9b862d71fa611ec920ac80c2072f5a839733 appears offline
[2025-12-04 15:19:47] INFO     - aegis.node - Shutting down
[2025-12-04 15:19:49] ERROR    - aegis.peer.5001 - Error sending to 29a0c47e4066e052bb632696332b34517d5775cbf961d1683d63244c06baf1ec: ('Connection aborted.', ConnectionResetError(104, 'Connection reset by peer'))
[2025-12-04 15:20:00] ERROR    - aegis.peer.5001 - Error sending to 29a0c47e4066e052bb632696332b34517d5775cbf961d1683d63244c06baf1ec: HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x758b063facf0>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-04 15:20:10] ERROR    - aegis.peer.5001 - Error sending to 29a0c47e4066e052bb632696332b34517d5775cbf961d1683d63244c06baf1ec: HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x758b063faad0>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-04 15:20:20] ERROR    - aegis.peer.5001 - Error sending to 29a0c47e4066e052bb632696332b34517d5775cbf961d1683d63244c06baf1ec: HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x758b063fb130>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-04 15:20:30] ERROR    - aegis.peer.5001 - Error sending to 29a0c47e4066e052bb632696332b34517d5775cbf961d1683d63244c06baf1ec: HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x758b063faf10>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-04 15:20:30] WARNING  - aegis.peer.5001 - Removing unresponsive peer 29a0c47e4066e052bb632696332b34517d5775cbf961d1683d63244c06baf1ec
[2025-12-04 15:20:30] INFO     - aegis.peer.5001 - Removed peer 29a0c47e4066e052bb632696332b34517d5775cbf961d1683d63244c06baf1ec
[2025-12-04 15:22:27] INFO     - aegis.node - Shutting down
[2025-12-04 15:22:33] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-04 15:22:33] INFO     - aegis.node - Initializing node: Hospital_A (4fee4693...)
[2025-12-04 15:22:33] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 15:22:33] INFO     - aegis.audit - Genesis block created
[2025-12-04 15:22:33] INFO     - aegis.node - Generating synthetic data
[2025-12-04 15:22:33] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 15:22:33] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 15:22:33] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 15:22:33] DEBUG    - aegis.node - All components initialized
[2025-12-04 15:22:33] INFO     - aegis.node - Node initialization complete
[2025-12-04 15:22:33] INFO     - aegis.peer.5000 - Peer manager started on 0.0.0.0:5000
[2025-12-04 15:22:33] INFO     - aegis.node - Network created: 00c8f15d00c58d92b47fc0b9411e3921
[2025-12-04 15:22:33] INFO     - aegis.main - ============================================================
[2025-12-04 15:22:33] INFO     - aegis.main - NETWORK ID: 00c8f15d00c58d92b47fc0b9411e3921
[2025-12-04 15:22:33] INFO     - aegis.main - ============================================================
[2025-12-04 15:22:33] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 15:22:33] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 15:23:35] INFO     - aegis.main - Initializing node: Hospital_B on port 5001
[2025-12-04 15:23:35] INFO     - aegis.node - Initializing node: Hospital_B (fa6f2058...)
[2025-12-04 15:23:35] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 15:23:36] INFO     - aegis.audit - Genesis block created
[2025-12-04 15:23:36] INFO     - aegis.node - Generating synthetic data
[2025-12-04 15:23:36] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 15:23:36] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 15:23:36] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 15:23:36] INFO     - aegis.node - Node initialization complete
[2025-12-04 15:23:36] INFO     - aegis.peer.5001 - Peer manager started on 0.0.0.0:5001
[2025-12-04 15:23:36] INFO     - aegis.node - Joined network: 00c8f15d00c58d92b47fc0b9411e3921
[2025-12-04 15:23:36] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 15:23:36] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 15:24:51] DEBUG    - aegis.node - Got peer ID from health check: fa6f205899a1a895...
[2025-12-04 15:24:51] INFO     - aegis.peer.5000 - Added peer fa6f205899a1a895a1e8357ed5e8845bc43ddc6b14e1466c90ffd3f73a4dccf0 at http://localhost:5001
[2025-12-04 15:24:51] INFO     - aegis.node - Connected to peer: http://localhost:5001
[2025-12-04 15:25:00] INFO     - aegis.peer.5001 - Added peer 4fee46939c909ce2bb1e2af78f7e89a075a4891ce1f9a0e72528eb8580013e95 at http://localhost:5000
[2025-12-04 15:25:00] INFO     - aegis.node - Connected to peer: http://localhost:5000
[2025-12-04 15:25:05] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-04 15:25:05] INFO     - aegis.node - Budget per round: ε=2.000000, δ=2.000000e-06
[2025-12-04 15:25:05] DEBUG    - aegis.node - Starting: Round 1
[2025-12-04 15:25:05] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 15:25:05] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 15:25:05] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 15:25:05] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 15:25:05] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 15:25:10] INFO     - aegis.aggregation - Key exchange complete: 0/1 shared secrets established
[2025-12-04 15:25:10] WARNING  - aegis.aggregation - Failed to establish keys with any of 1 peers. Check network connectivity.
[2025-12-04 15:25:10] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-04 15:25:23] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-04 15:25:23] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-04 15:25:23] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-04 15:25:31] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.50 total weight, threshold 100% not met
[2025-12-04 15:25:31] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 15:25:31] INFO     - aegis.node - Round 1: Acc=0.691, F1=0.000
[2025-12-04 15:25:31] DEBUG    - aegis.node - Completed: Round 1 in 26.108s
[2025-12-04 15:25:31] DEBUG    - aegis.node - Starting: Round 2
[2025-12-04 15:25:31] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 15:25:31] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 15:25:31] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 15:25:31] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 15:25:31] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 15:25:31] INFO     - aegis.anomaly_detector - Analysis complete: status=critical
[2025-12-04 15:25:31] INFO     - aegis.node - Anomalies: critical, rate=100.00%
[2025-12-04 15:25:31] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 15:25:31] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 15:25:31] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-04 15:25:44] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-04 15:25:44] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-04 15:25:44] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-04 15:25:52] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.50 total weight, threshold 100% not met
[2025-12-04 15:25:52] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 15:25:52] INFO     - aegis.node - Round 2: Acc=0.691, F1=0.000
[2025-12-04 15:25:52] DEBUG    - aegis.node - Completed: Round 2 in 21.063s
[2025-12-04 15:25:52] DEBUG    - aegis.node - Starting: Round 3
[2025-12-04 15:25:52] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 15:25:52] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 15:25:52] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 15:25:52] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 15:25:52] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 15:25:52] INFO     - aegis.anomaly_detector - Analysis complete: status=critical
[2025-12-04 15:25:52] INFO     - aegis.node - Anomalies: critical, rate=100.00%
[2025-12-04 15:25:52] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 15:25:52] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 15:25:52] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-04 15:26:05] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-04 15:26:05] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-04 15:26:05] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-04 15:26:13] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.50 total weight, threshold 100% not met
[2025-12-04 15:26:13] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 15:26:13] INFO     - aegis.node - Round 3: Acc=0.309, F1=0.472
[2025-12-04 15:26:13] DEBUG    - aegis.node - Completed: Round 3 in 21.058s
[2025-12-04 15:26:13] DEBUG    - aegis.node - Starting: Round 4
[2025-12-04 15:26:13] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 15:26:13] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 15:26:13] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 15:26:13] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 15:26:13] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 15:26:13] INFO     - aegis.anomaly_detector - Analysis complete: status=critical
[2025-12-04 15:26:13] INFO     - aegis.node - Anomalies: critical, rate=100.00%
[2025-12-04 15:26:13] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 15:26:13] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 15:26:13] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-04 15:26:26] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-04 15:26:26] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-04 15:26:26] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-04 15:26:34] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.50 total weight, threshold 100% not met
[2025-12-04 15:26:34] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 15:26:34] INFO     - aegis.node - Round 4: Acc=0.691, F1=0.000
[2025-12-04 15:26:34] DEBUG    - aegis.node - Completed: Round 4 in 21.055s
[2025-12-04 15:26:34] DEBUG    - aegis.node - Starting: Round 5
[2025-12-04 15:26:34] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 15:26:34] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 15:26:34] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 15:26:34] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 15:26:34] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 15:26:34] INFO     - aegis.anomaly_detector - Analysis complete: status=critical
[2025-12-04 15:26:34] INFO     - aegis.node - Anomalies: critical, rate=100.00%
[2025-12-04 15:26:34] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 15:26:34] WARNING  - aegis.privacy.dp - Requested ε=2.0000, δ=2.0000e-06 exceeds budget. Using remaining: ε=2.0000, δ=2.0000e-06
[2025-12-04 15:26:34] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 15:26:34] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-04 15:26:47] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-04 15:26:47] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-04 15:26:47] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-04 15:26:55] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.50 total weight, threshold 100% not met
[2025-12-04 15:26:55] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 15:26:55] INFO     - aegis.node - Round 5: Acc=0.691, F1=0.000
[2025-12-04 15:26:55] DEBUG    - aegis.node - Completed: Round 5 in 21.076s
[2025-12-04 15:26:55] INFO     - aegis.node - Federated training complete
[2025-12-04 15:34:53] INFO     - aegis.node - Starting federated training: 2 rounds
[2025-12-04 15:34:53] INFO     - aegis.node - Budget per round: ε=0.000000, δ=0.000000e+00
[2025-12-04 15:34:53] DEBUG    - aegis.node - Starting: Round 1
[2025-12-04 15:34:53] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 15:34:53] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 15:34:53] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 15:34:53] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 15:34:53] ERROR    - aegis.node - Error in round 1: float division by zero
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 255, in run_federated_training
    private_grads = self.dp_engine.add_gaussian_noise(
        clipped_grads,
    ...<2 lines>...
        delta=delta_per_round
    )
  File "/home/liminal_mradul/aegis (Copy)/src/privacy/dp_engine.py", line 92, in add_gaussian_noise
    sigma = sensitivity * np.sqrt(2 * np.log(1.25 / delta)) / epsilon
                                             ~~~~~^~~~~~~
ZeroDivisionError: float division by zero
[2025-12-04 15:34:53] DEBUG    - aegis.node - Completed: Round 1 in 0.065s
[2025-12-04 15:34:53] DEBUG    - aegis.node - Starting: Round 2
[2025-12-04 15:34:53] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 15:34:53] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 15:34:53] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 15:34:53] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 15:34:53] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 15:34:53] INFO     - aegis.anomaly_detector - Analysis complete: status=critical
[2025-12-04 15:34:53] INFO     - aegis.node - Anomalies: critical, rate=100.00%
[2025-12-04 15:34:53] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 15:34:53] ERROR    - aegis.node - Error in round 2: float division by zero
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 255, in run_federated_training
    private_grads = self.dp_engine.add_gaussian_noise(
        clipped_grads,
    ...<2 lines>...
        delta=delta_per_round
    )
  File "/home/liminal_mradul/aegis (Copy)/src/privacy/dp_engine.py", line 92, in add_gaussian_noise
    sigma = sensitivity * np.sqrt(2 * np.log(1.25 / delta)) / epsilon
                                             ~~~~~^~~~~~~
ZeroDivisionError: float division by zero
[2025-12-04 15:34:53] DEBUG    - aegis.node - Completed: Round 2 in 0.009s
[2025-12-04 15:34:53] INFO     - aegis.node - Federated training complete
[2025-12-04 15:35:23] WARNING  - aegis.privacy.budget - Privacy budget reset - all consumption history cleared
[2025-12-04 15:35:23] INFO     - aegis.node - Budget reset
[2025-12-04 15:35:39] INFO     - aegis.node - Starting federated training: 2 rounds
[2025-12-04 15:35:39] INFO     - aegis.node - Budget per round: ε=5.000000, δ=5.000000e-06
[2025-12-04 15:35:39] DEBUG    - aegis.node - Starting: Round 1
[2025-12-04 15:35:39] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 15:35:39] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 15:35:39] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 15:35:39] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 15:35:39] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 15:35:44] INFO     - aegis.aggregation - Key exchange complete: 0/1 shared secrets established
[2025-12-04 15:35:44] WARNING  - aegis.aggregation - Failed to establish keys with any of 1 peers. Check network connectivity.
[2025-12-04 15:35:44] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-04 15:35:57] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-04 15:35:57] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-04 15:35:57] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-04 15:36:05] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.50 total weight, threshold 100% not met
[2025-12-04 15:36:05] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 15:36:05] INFO     - aegis.node - Round 1: Acc=0.693, F1=0.013
[2025-12-04 15:36:05] DEBUG    - aegis.node - Completed: Round 1 in 26.087s
[2025-12-04 15:36:05] DEBUG    - aegis.node - Starting: Round 2
[2025-12-04 15:36:05] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 15:36:05] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 15:36:05] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 15:36:05] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 15:36:05] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 15:36:05] INFO     - aegis.anomaly_detector - Analysis complete: status=critical
[2025-12-04 15:36:05] INFO     - aegis.node - Anomalies: critical, rate=100.00%
[2025-12-04 15:36:05] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 15:36:05] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 15:36:05] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-04 15:36:18] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-04 15:36:18] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-04 15:36:18] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-04 15:36:26] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.50 total weight, threshold 100% not met
[2025-12-04 15:36:26] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 15:36:26] INFO     - aegis.node - Round 2: Acc=0.446, F1=0.520
[2025-12-04 15:36:26] DEBUG    - aegis.node - Completed: Round 2 in 21.075s
[2025-12-04 15:36:26] INFO     - aegis.node - Federated training complete
[2025-12-04 15:39:15] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 15:39:15] INFO     - aegis.anomaly_detector - Analysis complete: status=critical
[2025-12-04 21:35:47] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-04 21:35:47] INFO     - aegis.node - Initializing node: Hospital_A (420090c4...)
[2025-12-04 21:35:47] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 21:35:47] INFO     - aegis.audit - Genesis block created
[2025-12-04 21:35:47] INFO     - aegis.node - Generating synthetic data
[2025-12-04 21:35:47] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 21:35:47] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 21:35:47] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:35:47] INFO     - aegis.node - Node initialization complete
[2025-12-04 21:35:47] INFO     - aegis.peer.5000 - Peer manager started on 0.0.0.0:5000
[2025-12-04 21:35:47] INFO     - aegis.node - Network created: 658d23734c0d4f4ae1e4c116921b5bbc
[2025-12-04 21:35:47] INFO     - aegis.main - ============================================================
[2025-12-04 21:35:47] INFO     - aegis.main - NETWORK ID: 658d23734c0d4f4ae1e4c116921b5bbc
[2025-12-04 21:35:47] INFO     - aegis.main - ============================================================
[2025-12-04 21:35:47] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 21:35:47] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 21:37:08] ERROR    - aegis.node - Command error: 'AegisNode' object has no attribute '_cmd_train'
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 403, in start_interactive_shell
    self._cmd_train()
    ^^^^^^^^^^^^^^^
AttributeError: 'AegisNode' object has no attribute '_cmd_train'
[2025-12-04 21:37:23] ERROR    - aegis.node - Command error: 'AegisNode' object has no attribute '_cmd_train'
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 403, in start_interactive_shell
    self._cmd_train()
    ^^^^^^^^^^^^^^^
AttributeError: 'AegisNode' object has no attribute '_cmd_train'
[2025-12-04 21:53:06] ERROR    - aegis.node - Command error: 'AegisNode' object has no attribute '_cmd_train'
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 403, in start_interactive_shell
    elif cmd == 'audit':
        ^^^^^^^^^^^^^^^
AttributeError: 'AegisNode' object has no attribute '_cmd_train'
[2025-12-04 21:53:08] INFO     - aegis.node - Shutting down
[2025-12-04 21:53:21] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-04 21:53:21] INFO     - aegis.node - Initializing node: Hospital_A (5fc17ddb...)
[2025-12-04 21:53:21] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 21:53:21] INFO     - aegis.audit - Genesis block created
[2025-12-04 21:53:21] INFO     - aegis.node - Generating synthetic data
[2025-12-04 21:53:21] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 21:53:21] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 21:53:21] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:53:21] INFO     - aegis.node - Node initialization complete
[2025-12-04 21:53:21] INFO     - aegis.peer.5000 - Peer manager started on 0.0.0.0:5000
[2025-12-04 21:53:22] INFO     - aegis.node - Network created: b3be52044ab21e7b1fe6f149f5e991b7
[2025-12-04 21:53:22] INFO     - aegis.main - ============================================================
[2025-12-04 21:53:22] INFO     - aegis.main - NETWORK ID: b3be52044ab21e7b1fe6f149f5e991b7
[2025-12-04 21:53:22] INFO     - aegis.main - ============================================================
[2025-12-04 21:53:22] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 21:53:22] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 21:53:26] INFO     - aegis.node - Starting federated training: 2 rounds
[2025-12-04 21:53:26] WARNING  - aegis.node - No peers - running in local mode
[2025-12-04 21:53:26] INFO     - aegis.node - Budget per round: ε=5.000000, δ=5.000000e-06
[2025-12-04 21:53:26] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:53:26] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:53:26] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:53:26] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:53:26] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 21:53:26] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 21:53:26] INFO     - aegis.node - Round 1: Acc=0.314, F1=0.478
[2025-12-04 21:53:26] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:53:26] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:53:26] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:53:26] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:53:26] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 21:53:26] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 21:53:26] INFO     - aegis.node - Round 2: Acc=0.686, F1=0.000
[2025-12-04 21:53:26] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-04 21:53:27] INFO     - aegis.audit - Block 1 added to chain: 0000c3878a9b0c6b...
[2025-12-04 21:53:27] INFO     - aegis.node - Federated training complete
[2025-12-04 21:54:55] INFO     - aegis.main - Initializing node: Hospital_B on port 5001
[2025-12-04 21:54:55] INFO     - aegis.node - Initializing node: Hospital_B (874faf86...)
[2025-12-04 21:54:55] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 21:54:56] INFO     - aegis.audit - Genesis block created
[2025-12-04 21:54:56] INFO     - aegis.node - Generating synthetic data
[2025-12-04 21:54:56] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 21:54:56] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 21:54:56] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:54:56] INFO     - aegis.node - Node initialization complete
[2025-12-04 21:54:56] INFO     - aegis.peer.5001 - Peer manager started on 0.0.0.0:5001
[2025-12-04 21:54:57] INFO     - aegis.node - Joined network: b3be52044ab21e7b1fe6f149f5e991b7
[2025-12-04 21:54:57] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 21:54:57] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 21:55:38] INFO     - aegis.peer.5001 - Added peer 5fc17ddbd3037d4cc5146368bd74ceb0320cdb9bc08efd084c48ed57739fb3b3 at http://localhost:5000
[2025-12-04 21:55:38] INFO     - aegis.node - Connected to peer: http://localhost:5000
[2025-12-04 21:55:42] INFO     - aegis.audit - Force mining pending transactions
[2025-12-04 21:55:42] INFO     - aegis.audit - Mining block with 1 transactions
[2025-12-04 21:55:43] INFO     - aegis.audit - Block 1 added to chain: 00002727bfbcad2f...
[2025-12-04 21:56:09] INFO     - aegis.peer.5000 - Added peer 874faf8671188eabc159a4ea829c7b88be1b6b9a76c01304934b7c8a0e57c5f5 at http://localhost:5001
[2025-12-04 21:56:09] INFO     - aegis.node - Connected to peer: http://localhost:5001
[2025-12-04 21:56:13] INFO     - aegis.audit - No pending transactions to mine
[2025-12-04 21:56:24] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-04 21:56:24] INFO     - aegis.node - Budget per round: ε=0.000000, δ=0.000000e+00
[2025-12-04 21:56:24] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:56:24] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:56:24] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:56:24] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-04 21:56:24] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-04 21:56:24] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:56:24] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:56:24] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Analysis complete: status=high
[2025-12-04 21:56:24] INFO     - aegis.node - Anomalies: high, rate=11.20%
[2025-12-04 21:56:24] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:56:24] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-04 21:56:24] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-04 21:56:24] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:56:24] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:56:24] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Analysis complete: status=high
[2025-12-04 21:56:24] INFO     - aegis.node - Anomalies: high, rate=11.20%
[2025-12-04 21:56:24] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:56:24] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-04 21:56:24] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-04 21:56:24] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:56:24] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:56:24] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Analysis complete: status=high
[2025-12-04 21:56:24] INFO     - aegis.node - Anomalies: high, rate=11.20%
[2025-12-04 21:56:24] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:56:24] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-04 21:56:24] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-04 21:56:24] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:56:24] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:56:24] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 21:56:24] INFO     - aegis.anomaly_detector - Analysis complete: status=high
[2025-12-04 21:56:24] INFO     - aegis.node - Anomalies: high, rate=11.20%
[2025-12-04 21:56:24] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:56:24] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-04 21:56:24] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-04 21:56:24] INFO     - aegis.node - Federated training complete
[2025-12-04 21:57:37] INFO     - aegis.voting - Consensus reached: 881f8cf3d8e408f4... with 50.00% (threshold: 50.00%)
[2025-12-04 21:57:37] INFO     - aegis.consensus - Vote consensus: 881f8cf3... (threshold: 50%, voters: 1)
[2025-12-04 21:57:39] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-04 21:57:39] ERROR    - aegis.consensus - Commit phase failed
[2025-12-04 21:58:59] INFO     - aegis.main - Initializing node: Hospital_B on port 5001
[2025-12-04 21:58:59] INFO     - aegis.node - Initializing node: Hospital_B (b76259d6...)
[2025-12-04 21:58:59] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 21:59:00] INFO     - aegis.audit - Genesis block created
[2025-12-04 21:59:00] INFO     - aegis.node - Generating synthetic data
[2025-12-04 21:59:00] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 21:59:00] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 21:59:00] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:59:00] INFO     - aegis.node - Node initialization complete
[2025-12-04 21:59:00] INFO     - aegis.peer.5001 - Peer manager started on 0.0.0.0:5001
[2025-12-04 21:59:01] INFO     - aegis.node - Joined network: b3be52044ab21e7b1fe6f149f5e991b7
[2025-12-04 21:59:01] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 21:59:01] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 21:59:07] INFO     - aegis.audit - Force mining pending transactions
[2025-12-04 21:59:07] INFO     - aegis.audit - Mining block with 1 transactions
[2025-12-04 21:59:08] INFO     - aegis.audit - Block 1 added to chain: 0000cc574e063fd9...
[2025-12-04 21:59:14] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-04 21:59:14] WARNING  - aegis.node - No peers - running in local mode
[2025-12-04 21:59:14] INFO     - aegis.node - Budget per round: ε=2.000000, δ=2.000000e-06
[2025-12-04 21:59:14] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:59:14] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:59:14] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:59:14] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:59:14] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 21:59:14] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 21:59:14] INFO     - aegis.node - Round 1: Acc=0.311, F1=0.474
[2025-12-04 21:59:14] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:59:14] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:59:14] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:59:14] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:59:14] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 21:59:14] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 21:59:14] INFO     - aegis.node - Round 2: Acc=0.332, F1=0.480
[2025-12-04 21:59:14] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:59:14] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:59:14] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:59:14] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:59:14] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 21:59:14] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 21:59:14] INFO     - aegis.node - Round 3: Acc=0.689, F1=0.000
[2025-12-04 21:59:14] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-04 21:59:14] INFO     - aegis.audit - Block 2 added to chain: 0000479355ae3373...
[2025-12-04 21:59:14] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:59:14] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:59:14] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:59:14] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:59:14] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 21:59:14] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 21:59:14] INFO     - aegis.node - Round 4: Acc=0.314, F1=0.476
[2025-12-04 21:59:14] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:59:14] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:59:14] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:59:14] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:59:14] WARNING  - aegis.privacy.dp - Requested ε=2.0000, δ=2.0000e-06 exceeds budget. Using remaining: ε=2.0000, δ=2.0000e-06
[2025-12-04 21:59:14] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 21:59:14] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 21:59:14] INFO     - aegis.node - Round 5: Acc=0.689, F1=0.000
[2025-12-04 21:59:14] INFO     - aegis.node - Federated training complete
[2025-12-04 21:59:34] INFO     - aegis.node - Starting federated training: 1 rounds
[2025-12-04 21:59:34] WARNING  - aegis.node - No peers - running in local mode
[2025-12-04 21:59:34] INFO     - aegis.node - Budget per round: ε=0.000000, δ=0.000000e+00
[2025-12-04 21:59:34] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:59:34] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:59:34] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:59:34] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:59:34] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-04 21:59:34] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-04 21:59:34] INFO     - aegis.node - Federated training complete
[2025-12-04 21:59:51] WARNING  - aegis.privacy.budget - Privacy budget reset - all consumption history cleared
[2025-12-04 21:59:51] INFO     - aegis.node - Budget reset
[2025-12-04 21:59:59] INFO     - aegis.node - Starting federated training: 10 rounds
[2025-12-04 21:59:59] WARNING  - aegis.node - No peers - running in local mode
[2025-12-04 21:59:59] INFO     - aegis.node - Budget per round: ε=1.000000, δ=1.000000e-06
[2025-12-04 21:59:59] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:59:59] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:59:59] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:59:59] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:59:59] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 21:59:59] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 21:59:59] INFO     - aegis.node - Round 1: Acc=0.427, F1=0.516
[2025-12-04 21:59:59] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-04 21:59:59] INFO     - aegis.audit - Block 3 added to chain: 00000f57ffa97f72...
[2025-12-04 21:59:59] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:59:59] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:59:59] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:59:59] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:59:59] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 21:59:59] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 21:59:59] INFO     - aegis.node - Round 2: Acc=0.689, F1=0.000
[2025-12-04 21:59:59] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:59:59] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:59:59] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:59:59] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:59:59] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 21:59:59] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 21:59:59] INFO     - aegis.node - Round 3: Acc=0.738, F1=0.288
[2025-12-04 21:59:59] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 21:59:59] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 21:59:59] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 21:59:59] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 21:59:59] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 21:59:59] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 21:59:59] INFO     - aegis.node - Round 4: Acc=0.503, F1=0.548
[2025-12-04 21:59:59] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-04 22:00:00] INFO     - aegis.audit - Block 4 added to chain: 000000bef7ecf96d...
[2025-12-04 22:00:00] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:00:00] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:00:00] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:00:00] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:00:00] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 22:00:00] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 22:00:00] INFO     - aegis.node - Round 5: Acc=0.689, F1=0.000
[2025-12-04 22:00:00] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:00:00] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:00:00] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:00:00] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:00:00] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 22:00:00] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 22:00:00] INFO     - aegis.node - Round 6: Acc=0.689, F1=0.000
[2025-12-04 22:00:00] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:00:00] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:00:00] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:00:00] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:00:00] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 22:00:00] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 22:00:00] INFO     - aegis.node - Round 7: Acc=0.794, F1=0.573
[2025-12-04 22:00:00] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-04 22:00:00] INFO     - aegis.audit - Block 5 added to chain: 0000147410998b65...
[2025-12-04 22:00:00] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:00:00] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:00:00] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:00:00] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:00:00] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 22:00:00] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 22:00:00] INFO     - aegis.node - Round 8: Acc=0.796, F1=0.564
[2025-12-04 22:00:00] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:00:00] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:00:00] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:00:00] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:00:00] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 22:00:00] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 22:00:00] INFO     - aegis.node - Round 9: Acc=0.532, F1=0.560
[2025-12-04 22:00:00] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:00:00] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:00:00] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:00:00] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:00:00] WARNING  - aegis.privacy.dp - Requested ε=1.0000, δ=1.0000e-06 exceeds budget. Using remaining: ε=1.0000, δ=1.0000e-06
[2025-12-04 22:00:00] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-04 22:00:00] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-04 22:00:00] INFO     - aegis.node - Round 10: Acc=0.639, F1=0.611
[2025-12-04 22:00:00] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-04 22:00:01] INFO     - aegis.audit - Block 6 added to chain: 0000f9a9c80c4df6...
[2025-12-04 22:00:01] INFO     - aegis.node - Federated training complete
[2025-12-04 22:00:16] INFO     - aegis.voting - Consensus reached: d0363f67ecd8b92a... with 100.00% (threshold: 50.00%)
[2025-12-04 22:00:16] INFO     - aegis.consensus - Vote consensus: d0363f67... (threshold: 50%, voters: 1)
[2025-12-04 22:00:16] INFO     - aegis.consensus - Consensus finalized: round 1, hash d0363f67..., 1/1 commits
[2025-12-04 22:00:16] INFO     - aegis.consensus - Consensus reached for round 1
[2025-12-04 22:00:34] INFO     - aegis.voting - Consensus reached: 9ce60ecdc2b213a3... with 50.00% (threshold: 50.00%)
[2025-12-04 22:00:34] INFO     - aegis.consensus - Vote consensus: 9ce60ecd... (threshold: 50%, voters: 1)
[2025-12-04 22:00:36] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-04 22:00:36] ERROR    - aegis.consensus - Commit phase failed
[2025-12-04 22:00:50] WARNING  - aegis.node - Could not get peer ID, using random: HTTPConnectionPool(host='localhost', port=5002): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x73d4f868f240>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-04 22:00:50] INFO     - aegis.peer.5001 - Added peer peer_016702e9 at http://localhost:5002
[2025-12-04 22:00:50] INFO     - aegis.node - Connected to peer: http://localhost:5002
[2025-12-04 22:00:57] ERROR    - aegis.peer.5001 - Error sending to peer_016702e9: HTTPConnectionPool(host='localhost', port=5002): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x73d4f868f130>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-04 22:01:07] ERROR    - aegis.peer.5001 - Error sending to peer_016702e9: HTTPConnectionPool(host='localhost', port=5002): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x73d4f868f020>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-04 22:01:17] ERROR    - aegis.peer.5001 - Error sending to peer_016702e9: HTTPConnectionPool(host='localhost', port=5002): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x73d4f868f350>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-04 22:01:27] ERROR    - aegis.peer.5001 - Error sending to peer_016702e9: HTTPConnectionPool(host='localhost', port=5002): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x73d4f868c270>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-04 22:01:37] ERROR    - aegis.peer.5001 - Error sending to peer_016702e9: HTTPConnectionPool(host='localhost', port=5002): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x73d4f868f570>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-04 22:01:37] WARNING  - aegis.peer.5001 - Removing unresponsive peer peer_016702e9
[2025-12-04 22:01:37] INFO     - aegis.peer.5001 - Removed peer peer_016702e9
[2025-12-04 22:01:47] INFO     - aegis.peer.5001 - Added peer 874faf8671188eabc159a4ea829c7b88be1b6b9a76c01304934b7c8a0e57c5f5 at http://localhost:5001
[2025-12-04 22:01:47] INFO     - aegis.node - Connected to peer: http://localhost:5001
[2025-12-04 22:02:02] INFO     - aegis.node - Shutting down
[2025-12-04 22:02:23] INFO     - aegis.main - Initializing node: Hospital_C on port 5002
[2025-12-04 22:02:23] INFO     - aegis.node - Initializing node: Hospital_C (db715cc0...)
[2025-12-04 22:02:23] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 22:02:23] INFO     - aegis.audit - Genesis block created
[2025-12-04 22:02:23] INFO     - aegis.node - Generating synthetic data
[2025-12-04 22:02:23] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 22:02:23] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 22:02:23] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:02:23] INFO     - aegis.node - Node initialization complete
[2025-12-04 22:02:23] INFO     - aegis.peer.5002 - Peer manager started on 0.0.0.0:5002
[2025-12-04 22:02:23] INFO     - aegis.node - Joined network: b3be52044ab21e7b1fe6f149f5e991b7
[2025-12-04 22:02:23] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 22:02:23] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 22:02:49] INFO     - aegis.peer.5002 - Added peer 874faf8671188eabc159a4ea829c7b88be1b6b9a76c01304934b7c8a0e57c5f5 at http://localhost:5001
[2025-12-04 22:02:49] INFO     - aegis.node - Connected to peer: http://localhost:5001
[2025-12-04 22:02:58] INFO     - aegis.peer.5002 - Added peer 5fc17ddbd3037d4cc5146368bd74ceb0320cdb9bc08efd084c48ed57739fb3b3 at http://localhost:5000
[2025-12-04 22:02:58] INFO     - aegis.node - Connected to peer: http://localhost:5000
[2025-12-04 22:03:05] INFO     - aegis.peer.5001 - Added peer db715cc0c400d7d215becf68fd77deeddc038f027009bd8592379e3b03833b8b at http://localhost:5002
[2025-12-04 22:03:05] INFO     - aegis.node - Connected to peer: http://localhost:5002
[2025-12-04 22:03:21] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.25 total weight, threshold 50% not met (voters: 1)
[2025-12-04 22:03:21] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 22:05:04] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.33 total weight, threshold 50% not met (voters: 1)
[2025-12-04 22:05:04] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 22:06:06] INFO     - aegis.main - Initializing node: Hospital_C on port 5003
[2025-12-04 22:06:06] INFO     - aegis.node - Initializing node: Hospital_C (f7e76e0a...)
[2025-12-04 22:06:06] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-04 22:06:06] INFO     - aegis.audit - Genesis block created
[2025-12-04 22:06:06] INFO     - aegis.node - Generating synthetic data
[2025-12-04 22:06:06] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-04 22:06:06] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-04 22:06:06] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:06:06] INFO     - aegis.node - Node initialization complete
[2025-12-04 22:06:06] INFO     - aegis.peer.5003 - Peer manager started on 0.0.0.0:5003
[2025-12-04 22:06:07] INFO     - aegis.node - Joined network: b3be52044ab21e7b1fe6f149f5e991b7
[2025-12-04 22:06:07] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-04 22:06:07] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-04 22:06:43] INFO     - aegis.peer.5003 - Added peer 874faf8671188eabc159a4ea829c7b88be1b6b9a76c01304934b7c8a0e57c5f5 at http://localhost:5001
[2025-12-04 22:06:43] INFO     - aegis.node - Connected to peer: http://localhost:5001
[2025-12-04 22:06:55] INFO     - aegis.peer.5003 - Added peer db715cc0c400d7d215becf68fd77deeddc038f027009bd8592379e3b03833b8b at http://localhost:5002
[2025-12-04 22:06:55] INFO     - aegis.node - Connected to peer: http://localhost:5002
[2025-12-04 22:07:00] INFO     - aegis.peer.5003 - Added peer 5fc17ddbd3037d4cc5146368bd74ceb0320cdb9bc08efd084c48ed57739fb3b3 at http://localhost:5000
[2025-12-04 22:07:00] INFO     - aegis.node - Connected to peer: http://localhost:5000
[2025-12-04 22:07:08] INFO     - aegis.peer.5000 - Added peer f7e76e0a7d31bd1697210dcb38946df24d27b0b2a4cd5af44ea558b0f86aba04 at http://localhost:5003
[2025-12-04 22:07:08] INFO     - aegis.node - Connected to peer: http://localhost:5003
[2025-12-04 22:07:13] INFO     - aegis.peer.5001 - Added peer f7e76e0a7d31bd1697210dcb38946df24d27b0b2a4cd5af44ea558b0f86aba04 at http://localhost:5003
[2025-12-04 22:07:13] INFO     - aegis.node - Connected to peer: http://localhost:5003
[2025-12-04 22:07:21] INFO     - aegis.peer.5002 - Added peer f7e76e0a7d31bd1697210dcb38946df24d27b0b2a4cd5af44ea558b0f86aba04 at http://localhost:5003
[2025-12-04 22:07:21] INFO     - aegis.node - Connected to peer: http://localhost:5003
[2025-12-04 22:07:32] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.25 total weight, threshold 50% not met (voters: 1)
[2025-12-04 22:07:32] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 22:07:48] INFO     - aegis.node - Starting federated training: 2 rounds
[2025-12-04 22:07:48] INFO     - aegis.node - Budget per round: ε=5.000000, δ=5.000000e-06
[2025-12-04 22:07:48] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:07:48] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:07:48] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:07:48] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:07:48] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 22:07:53] INFO     - aegis.aggregation - Key exchange complete: 0/3 shared secrets established
[2025-12-04 22:07:53] WARNING  - aegis.aggregation - Failed to establish keys with any of 3 peers. Check network connectivity.
[2025-12-04 22:07:53] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-04 22:08:03] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-04 22:08:03] INFO     - aegis.node - Budget per round: ε=2.000000, δ=2.000000e-06
[2025-12-04 22:08:03] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:08:03] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:08:03] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:08:03] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:08:03] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 22:08:06] INFO     - aegis.aggregation - Aggregation complete: 1/4 contributors, dimension=20
[2025-12-04 22:08:06] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-04 22:08:06] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-04 22:08:07] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-04 22:08:07] INFO     - aegis.node - Budget per round: ε=2.000000, δ=2.000000e-06
[2025-12-04 22:08:07] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:08:07] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:08:07] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:08:07] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:08:07] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 22:08:11] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-04 22:08:11] INFO     - aegis.node - Budget per round: ε=0.000000, δ=0.000000e+00
[2025-12-04 22:08:11] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:08:11] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:08:11] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:08:11] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-04 22:08:11] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-04 22:08:11] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:08:11] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:08:11] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Analysis complete: status=high
[2025-12-04 22:08:11] INFO     - aegis.node - Anomalies: high, rate=11.20%
[2025-12-04 22:08:11] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:08:11] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-04 22:08:11] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-04 22:08:11] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:08:11] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:08:11] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Analysis complete: status=high
[2025-12-04 22:08:11] INFO     - aegis.node - Anomalies: high, rate=11.20%
[2025-12-04 22:08:11] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:08:11] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-04 22:08:11] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-04 22:08:11] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:08:11] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:08:11] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Analysis complete: status=high
[2025-12-04 22:08:11] INFO     - aegis.node - Anomalies: high, rate=11.20%
[2025-12-04 22:08:11] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:08:11] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-04 22:08:11] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-04 22:08:11] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:08:11] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:08:11] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 22:08:11] INFO     - aegis.anomaly_detector - Analysis complete: status=high
[2025-12-04 22:08:11] INFO     - aegis.node - Anomalies: high, rate=11.20%
[2025-12-04 22:08:11] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:08:11] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-04 22:08:11] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-04 22:08:11] INFO     - aegis.node - Federated training complete
[2025-12-04 22:08:14] WARNING  - aegis.consensus - No consensus in voting phase: 1 distinct votes, 0.20 total weight, threshold 50% not met (voters: 1)
[2025-12-04 22:08:14] ERROR    - aegis.consensus - Vote phase failed
[2025-12-04 22:08:14] INFO     - aegis.node - Round 1: Acc=0.800, F1=0.634
[2025-12-04 22:08:14] INFO     - aegis.node - Step 1/5: Local training
[2025-12-04 22:08:14] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-04 22:08:14] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-04 22:08:14] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-04 22:08:14] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-04 22:08:14] INFO     - aegis.anomaly_detector - Analysis complete: status=medium
[2025-12-04 22:08:14] INFO     - aegis.node - Anomalies: medium, rate=9.55%
[2025-12-04 22:08:14] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-04 22:08:14] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-04 22:08:14] ERROR    - aegis.aggregation - Failed: Secure contribution after 0.003s - Seed must be between 0 and 2**32 - 1
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/secure_aggregation/aggregator.py", line 256, in contribute
    masked_vector = PairwiseMasking.apply_pairwise_masks(
        scaled_vector,
    ...<2 lines>...
        self.node_id
    )
  File "/home/liminal_mradul/aegis (Copy)/src/secure_aggregation/crypto.py", line 182, in apply_pairwise_masks
    mask = PairwiseMasking.generate_mask(seed, dimension)
  File "/home/liminal_mradul/aegis (Copy)/src/secure_aggregation/crypto.py", line 147, in generate_mask
    rng = np.random.RandomState(seed_int)
  File "numpy/random/mtrand.pyx", line 186, in numpy.random.mtrand.RandomState.__init__
  File "numpy/random/_mt19937.pyx", line 168, in numpy.random._mt19937.MT19937._legacy_seeding
  File "numpy/random/_mt19937.pyx", line 182, in numpy.random._mt19937.MT19937._legacy_seeding
ValueError: Seed must be between 0 and 2**32 - 1
[2025-12-04 22:08:14] ERROR    - aegis.node - Error in round 2: Seed must be between 0 and 2**32 - 1
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 274, in run_federated_training
    self.aggregator.contribute(private_grads, session_id)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/liminal_mradul/aegis (Copy)/src/secure_aggregation/aggregator.py", line 256, in contribute
    masked_vector = PairwiseMasking.apply_pairwise_masks(
        scaled_vector,
    ...<2 lines>...
        self.node_id
    )
  File "/home/liminal_mradul/aegis (Copy)/src/secure_aggregation/crypto.py", line 182, in apply_pairwise_masks
    mask = PairwiseMasking.generate_mask(seed, dimension)
  File "/home/liminal_mradul/aegis (Copy)/src/secure_aggregation/crypto.py", line 147, in generate_mask
    rng = np.random.RandomState(seed_int)
  File "numpy/random/mtrand.pyx", line 186, in numpy.random.mtrand.RandomState.__init__
  File "numpy/random/_mt19937.pyx", line 168, in numpy.random._mt19937.MT19937._legacy_seeding
  File "numpy/random/_mt19937.pyx", line 182, in numpy.random._mt19937.MT19937._legacy_seeding
ValueError: Seed must be between 0 and 2**32 - 1
[2025-12-04 22:08:14] INFO     - aegis.node - Federated training complete
[2025-12-06 21:20:49] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-06 21:20:49] INFO     - aegis.node - Initializing node: Hospital_A (98323791...)
[2025-12-06 21:20:49] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-06 21:20:50] INFO     - aegis.audit - Genesis block created
[2025-12-06 21:20:50] INFO     - aegis.node - Generating synthetic data
[2025-12-06 21:20:50] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-06 21:20:50] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-06 21:20:50] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-06 21:20:50] DEBUG    - aegis.node - All components initialized
[2025-12-06 21:20:50] INFO     - aegis.node - Node initialization complete
[2025-12-06 21:20:50] INFO     - aegis.peer.5000 - Peer manager started on 0.0.0.0:5000
[2025-12-06 21:20:50] INFO     - aegis.node - Network created: 7e02ee85880d8c97e3254835782e3e61
[2025-12-06 21:20:50] INFO     - aegis.main - ============================================================
[2025-12-06 21:20:50] INFO     - aegis.main - NETWORK ID: 7e02ee85880d8c97e3254835782e3e61
[2025-12-06 21:20:50] INFO     - aegis.main - ============================================================
[2025-12-06 21:20:50] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-06 21:20:50] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-06 21:21:50] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-06 21:21:50] WARNING  - aegis.node - No peers - running in local mode
[2025-12-06 21:21:50] INFO     - aegis.node - Budget per round: ε=2.000000, δ=2.000000e-06
[2025-12-06 21:21:50] DEBUG    - aegis.node - Starting: Round 1
[2025-12-06 21:21:50] INFO     - aegis.node - Step 1/5: Local training
[2025-12-06 21:21:50] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-06 21:21:50] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-06 21:21:50] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-06 21:21:50] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-06 21:21:50] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-06 21:21:50] INFO     - aegis.node - Round 1: Acc=0.693, F1=0.000
[2025-12-06 21:21:50] DEBUG    - aegis.node - Completed: Round 1 in 0.030s
[2025-12-06 21:21:50] DEBUG    - aegis.node - Starting: Round 2
[2025-12-06 21:21:50] INFO     - aegis.node - Step 1/5: Local training
[2025-12-06 21:21:50] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-06 21:21:50] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-06 21:21:50] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-06 21:21:50] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-06 21:21:50] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-06 21:21:50] INFO     - aegis.node - Round 2: Acc=0.693, F1=0.000
[2025-12-06 21:21:50] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-06 21:21:50] INFO     - aegis.audit - Block 1 added to chain: 000052c265c37738...
[2025-12-06 21:21:50] DEBUG    - aegis.node - Completed: Round 2 in 0.019s
[2025-12-06 21:21:50] DEBUG    - aegis.node - Starting: Round 3
[2025-12-06 21:21:50] INFO     - aegis.node - Step 1/5: Local training
[2025-12-06 21:21:50] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-06 21:21:50] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-06 21:21:50] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-06 21:21:50] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-06 21:21:50] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-06 21:21:50] INFO     - aegis.node - Round 3: Acc=0.693, F1=0.000
[2025-12-06 21:21:50] DEBUG    - aegis.node - Completed: Round 3 in 0.005s
[2025-12-06 21:21:50] DEBUG    - aegis.node - Starting: Round 4
[2025-12-06 21:21:50] INFO     - aegis.node - Step 1/5: Local training
[2025-12-06 21:21:50] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-06 21:21:50] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-06 21:21:50] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-06 21:21:50] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-06 21:21:50] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-06 21:21:50] INFO     - aegis.node - Round 4: Acc=0.693, F1=0.000
[2025-12-06 21:21:50] DEBUG    - aegis.node - Completed: Round 4 in 0.006s
[2025-12-06 21:21:50] DEBUG    - aegis.node - Starting: Round 5
[2025-12-06 21:21:50] INFO     - aegis.node - Step 1/5: Local training
[2025-12-06 21:21:50] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-06 21:21:50] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-06 21:21:50] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-06 21:21:50] WARNING  - aegis.privacy.dp - Requested ε=2.0000, δ=2.0000e-06 exceeds budget. Using remaining: ε=2.0000, δ=2.0000e-06
[2025-12-06 21:21:50] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-06 21:21:50] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-06 21:21:50] INFO     - aegis.node - Round 5: Acc=0.693, F1=0.000
[2025-12-06 21:21:50] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-06 21:21:50] INFO     - aegis.audit - Block 2 added to chain: 0000f61b7d0e9dc7...
[2025-12-06 21:21:50] DEBUG    - aegis.node - Completed: Round 5 in 0.041s
[2025-12-06 21:21:50] INFO     - aegis.node - Federated training complete
[2025-12-06 21:21:57] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-06 21:21:57] INFO     - aegis.anomaly_detector - Analysis complete: status=medium
[2025-12-07 20:42:01] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-07 20:42:01] INFO     - aegis.node - Initializing node: Hospital_A (8e5c1f04...)
[2025-12-07 20:42:01] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-07 20:42:01] INFO     - aegis.audit - Genesis block created
[2025-12-07 20:42:01] INFO     - aegis.node - Generating synthetic data
[2025-12-07 20:42:01] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-07 20:42:01] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-07 20:42:01] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:42:01] DEBUG    - aegis.node - All components initialized
[2025-12-07 20:42:01] INFO     - aegis.node - Node initialization complete
[2025-12-07 20:42:01] INFO     - aegis.peer.5000 - Peer manager started on 0.0.0.0:5000
[2025-12-07 20:42:01] INFO     - aegis.node - Network created: bb172a1a3d1eea4cabdfa9d5f8ae33d6
[2025-12-07 20:42:01] INFO     - aegis.main - ============================================================
[2025-12-07 20:42:01] INFO     - aegis.main - NETWORK ID: bb172a1a3d1eea4cabdfa9d5f8ae33d6
[2025-12-07 20:42:01] INFO     - aegis.main - ============================================================
[2025-12-07 20:42:01] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-07 20:42:01] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-07 20:42:55] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-07 20:42:55] WARNING  - aegis.node - No peers - running in local mode
[2025-12-07 20:42:55] INFO     - aegis.node - Budget per round: ε=2.000000, δ=2.000000e-06
[2025-12-07 20:42:55] DEBUG    - aegis.node - Starting: Round 1
[2025-12-07 20:42:55] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:42:55] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:42:55] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:42:55] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:42:55] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 20:42:55] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 20:42:55] INFO     - aegis.node - Round 1: Acc=0.313, F1=0.477
[2025-12-07 20:42:55] DEBUG    - aegis.node - Completed: Round 1 in 0.030s
[2025-12-07 20:42:55] DEBUG    - aegis.node - Starting: Round 2
[2025-12-07 20:42:55] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:42:55] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:42:55] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:42:55] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:42:55] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 20:42:55] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 20:42:55] INFO     - aegis.node - Round 2: Acc=0.687, F1=0.000
[2025-12-07 20:42:55] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-07 20:42:55] INFO     - aegis.audit - Block 1 added to chain: 0000eaa01ff3ffee...
[2025-12-07 20:42:55] DEBUG    - aegis.node - Completed: Round 2 in 0.204s
[2025-12-07 20:42:55] DEBUG    - aegis.node - Starting: Round 3
[2025-12-07 20:42:55] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:42:55] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:42:55] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:42:55] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:42:55] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 20:42:55] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 20:42:55] INFO     - aegis.node - Round 3: Acc=0.406, F1=0.507
[2025-12-07 20:42:55] DEBUG    - aegis.node - Completed: Round 3 in 0.007s
[2025-12-07 20:42:55] DEBUG    - aegis.node - Starting: Round 4
[2025-12-07 20:42:55] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:42:55] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:42:55] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:42:55] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:42:55] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 20:42:55] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 20:42:55] INFO     - aegis.node - Round 4: Acc=0.687, F1=0.000
[2025-12-07 20:42:55] DEBUG    - aegis.node - Completed: Round 4 in 0.006s
[2025-12-07 20:42:55] DEBUG    - aegis.node - Starting: Round 5
[2025-12-07 20:42:55] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:42:55] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:42:55] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:42:55] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:42:55] WARNING  - aegis.privacy.dp - Requested ε=2.0000, δ=2.0000e-06 exceeds budget. Using remaining: ε=2.0000, δ=2.0000e-06
[2025-12-07 20:42:55] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 20:42:55] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 20:42:55] INFO     - aegis.node - Round 5: Acc=0.687, F1=0.000
[2025-12-07 20:42:55] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-07 20:42:56] INFO     - aegis.audit - Block 2 added to chain: 0000a31caf2ed250...
[2025-12-07 20:42:56] DEBUG    - aegis.node - Completed: Round 5 in 0.295s
[2025-12-07 20:42:56] INFO     - aegis.node - Federated training complete
[2025-12-07 20:48:03] INFO     - aegis.node - Starting federated training: 5 rounds
[2025-12-07 20:48:03] WARNING  - aegis.node - No peers - running in local mode
[2025-12-07 20:48:03] INFO     - aegis.node - Budget per round: ε=0.000000, δ=0.000000e+00
[2025-12-07 20:48:03] DEBUG    - aegis.node - Starting: Round 1
[2025-12-07 20:48:03] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:48:03] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:48:03] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:48:03] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:48:03] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-07 20:48:03] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-07 20:48:03] DEBUG    - aegis.node - Completed: Round 1 in 0.015s
[2025-12-07 20:48:03] DEBUG    - aegis.node - Starting: Round 2
[2025-12-07 20:48:03] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:48:03] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:48:03] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:48:03] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:48:03] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-07 20:48:03] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-07 20:48:03] DEBUG    - aegis.node - Completed: Round 2 in 0.006s
[2025-12-07 20:48:03] DEBUG    - aegis.node - Starting: Round 3
[2025-12-07 20:48:03] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:48:03] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:48:03] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:48:03] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:48:03] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-07 20:48:03] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-07 20:48:03] DEBUG    - aegis.node - Completed: Round 3 in 0.007s
[2025-12-07 20:48:03] DEBUG    - aegis.node - Starting: Round 4
[2025-12-07 20:48:03] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:48:03] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:48:03] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:48:03] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:48:03] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-07 20:48:03] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-07 20:48:03] DEBUG    - aegis.node - Completed: Round 4 in 0.005s
[2025-12-07 20:48:03] DEBUG    - aegis.node - Starting: Round 5
[2025-12-07 20:48:03] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:48:03] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:48:03] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:48:03] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:48:03] ERROR    - aegis.privacy.dp - Cannot add Gaussian noise with zero or negative epsilon
[2025-12-07 20:48:03] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-07 20:48:03] DEBUG    - aegis.node - Completed: Round 5 in 0.007s
[2025-12-07 20:48:03] INFO     - aegis.node - Federated training complete
[2025-12-07 20:48:14] INFO     - aegis.voting - Consensus reached: 06436652b10ea988... with 100.00% (threshold: 50.00%)
[2025-12-07 20:48:14] INFO     - aegis.consensus - Vote consensus: 06436652... (threshold: 50%, voters: 1)
[2025-12-07 20:48:14] INFO     - aegis.consensus - Consensus finalized: round 1, hash 06436652..., 1/1 commits
[2025-12-07 20:48:14] INFO     - aegis.consensus - Consensus reached for round 1
[2025-12-07 20:49:12] INFO     - aegis.main - Initializing node: Hospital_B on port 5001
[2025-12-07 20:49:12] INFO     - aegis.node - Initializing node: Hospital_B (48af2d63...)
[2025-12-07 20:49:12] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-07 20:49:12] INFO     - aegis.audit - Genesis block created
[2025-12-07 20:49:12] INFO     - aegis.node - Generating synthetic data
[2025-12-07 20:49:12] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-07 20:49:12] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-07 20:49:12] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:49:12] INFO     - aegis.node - Node initialization complete
[2025-12-07 20:49:12] INFO     - aegis.peer.5001 - Peer manager started on 0.0.0.0:5001
[2025-12-07 20:49:12] INFO     - aegis.node - Joined network: bb172a1a3d1eea4cabdfa9d5f8ae33d6
[2025-12-07 20:49:12] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-07 20:49:12] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-07 20:49:25] INFO     - aegis.peer.5001 - Added peer 8e5c1f04d0a8a951a10ecbb5decc7cac7cf1a7ec838f5bb01ee4c732785a2abf at http://localhost:5000
[2025-12-07 20:49:25] INFO     - aegis.node - Connected to peer: http://localhost:5000
[2025-12-07 20:49:30] DEBUG    - aegis.node - Got peer ID from health check: 48af2d63d013c5d7...
[2025-12-07 20:49:30] INFO     - aegis.peer.5000 - Added peer 48af2d63d013c5d72db03089943ba8f28cccb4e870dda9d2da3be9c9ca5bfb0e at http://localhost:5001
[2025-12-07 20:49:30] INFO     - aegis.node - Connected to peer: http://localhost:5001
[2025-12-07 20:49:42] INFO     - aegis.voting - Consensus reached: bdc5bb8e8cd21cf4... with 50.50% (threshold: 50.00%)
[2025-12-07 20:49:42] INFO     - aegis.consensus - Vote consensus: bdc5bb8e... (threshold: 50%, voters: 1)
[2025-12-07 20:49:44] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:49:44] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:50:15] WARNING  - aegis.privacy.budget - Privacy budget reset - all consumption history cleared
[2025-12-07 20:50:15] INFO     - aegis.node - Budget reset
[2025-12-07 20:50:26] INFO     - aegis.node - Starting federated training: 10 rounds
[2025-12-07 20:50:26] INFO     - aegis.node - Budget per round: ε=1.000000, δ=1.000000e-06
[2025-12-07 20:50:26] DEBUG    - aegis.node - Starting: Round 1
[2025-12-07 20:50:26] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:50:26] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:50:26] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:50:26] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:50:26] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-07 20:50:31] INFO     - aegis.aggregation - Key exchange complete: 0/1 shared secrets established
[2025-12-07 20:50:31] WARNING  - aegis.aggregation - Failed to establish keys with any of 1 peers. Check network connectivity.
[2025-12-07 20:50:31] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-07 20:50:44] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-07 20:50:44] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-07 20:50:44] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-07 20:50:52] INFO     - aegis.voting - Consensus reached: 163484f652f57090... with 50.50% (threshold: 50.00%)
[2025-12-07 20:50:52] INFO     - aegis.consensus - Vote consensus: 163484f6... (threshold: 50%, voters: 1)
[2025-12-07 20:50:54] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:50:54] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:50:54] INFO     - aegis.node - Round 1: Acc=0.720, F1=0.191
[2025-12-07 20:50:54] DEBUG    - aegis.node - Completed: Round 1 in 28.143s
[2025-12-07 20:50:54] DEBUG    - aegis.node - Starting: Round 2
[2025-12-07 20:50:54] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:50:54] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:50:54] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:50:54] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-07 20:50:54] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-07 20:50:54] INFO     - aegis.anomaly_detector - Analysis complete: status=medium
[2025-12-07 20:50:54] INFO     - aegis.node - Anomalies: medium, rate=8.60%
[2025-12-07 20:50:54] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:50:54] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-07 20:50:54] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-07 20:51:07] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-07 20:51:07] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-07 20:51:07] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-07 20:51:15] INFO     - aegis.voting - Consensus reached: 0375676f62fdb024... with 50.50% (threshold: 50.00%)
[2025-12-07 20:51:15] INFO     - aegis.consensus - Vote consensus: 0375676f... (threshold: 50%, voters: 1)
[2025-12-07 20:51:17] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:51:17] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:51:17] INFO     - aegis.node - Round 2: Acc=0.405, F1=0.505
[2025-12-07 20:51:17] DEBUG    - aegis.node - Completed: Round 2 in 23.057s
[2025-12-07 20:51:17] DEBUG    - aegis.node - Starting: Round 3
[2025-12-07 20:51:17] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:51:17] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:51:17] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:51:17] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-07 20:51:17] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-07 20:51:17] INFO     - aegis.anomaly_detector - Analysis complete: status=medium
[2025-12-07 20:51:17] INFO     - aegis.node - Anomalies: medium, rate=8.60%
[2025-12-07 20:51:17] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:51:17] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-07 20:51:17] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-07 20:51:30] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-07 20:51:30] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-07 20:51:30] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-07 20:51:39] INFO     - aegis.voting - Consensus reached: f716f8472d265870... with 50.50% (threshold: 50.00%)
[2025-12-07 20:51:39] INFO     - aegis.consensus - Vote consensus: f716f847... (threshold: 50%, voters: 1)
[2025-12-07 20:51:41] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:51:41] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:51:41] INFO     - aegis.node - Round 3: Acc=0.687, F1=0.000
[2025-12-07 20:51:41] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-07 20:51:41] INFO     - aegis.audit - Block 3 added to chain: 0000cfd58723d87c...
[2025-12-07 20:51:41] DEBUG    - aegis.node - Completed: Round 3 in 23.805s
[2025-12-07 20:51:41] DEBUG    - aegis.node - Starting: Round 4
[2025-12-07 20:51:41] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:51:41] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:51:41] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:51:41] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-07 20:51:41] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-07 20:51:41] INFO     - aegis.anomaly_detector - Analysis complete: status=medium
[2025-12-07 20:51:41] INFO     - aegis.node - Anomalies: medium, rate=8.60%
[2025-12-07 20:51:41] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:51:41] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-07 20:51:41] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-07 20:51:54] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-07 20:51:54] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-07 20:51:54] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-07 20:52:02] INFO     - aegis.voting - Consensus reached: ece988f8f5495b80... with 50.50% (threshold: 50.00%)
[2025-12-07 20:52:02] INFO     - aegis.consensus - Vote consensus: ece988f8... (threshold: 50%, voters: 1)
[2025-12-07 20:52:04] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:52:04] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:52:04] INFO     - aegis.node - Round 4: Acc=0.782, F1=0.507
[2025-12-07 20:52:04] DEBUG    - aegis.node - Completed: Round 4 in 23.062s
[2025-12-07 20:52:04] DEBUG    - aegis.node - Starting: Round 5
[2025-12-07 20:52:04] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:52:04] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:52:04] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:52:04] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-07 20:52:04] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-07 20:52:04] INFO     - aegis.anomaly_detector - Analysis complete: status=medium
[2025-12-07 20:52:04] INFO     - aegis.node - Anomalies: medium, rate=8.60%
[2025-12-07 20:52:04] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:52:04] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-07 20:52:04] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-07 20:52:17] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-07 20:52:17] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-07 20:52:17] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-07 20:52:25] INFO     - aegis.voting - Consensus reached: 6fd50ecf0ba65ec8... with 50.50% (threshold: 50.00%)
[2025-12-07 20:52:25] INFO     - aegis.consensus - Vote consensus: 6fd50ecf... (threshold: 50%, voters: 1)
[2025-12-07 20:52:27] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:52:27] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:52:27] INFO     - aegis.node - Round 5: Acc=0.804, F1=0.680
[2025-12-07 20:52:27] DEBUG    - aegis.node - Completed: Round 5 in 23.050s
[2025-12-07 20:52:27] DEBUG    - aegis.node - Starting: Round 6
[2025-12-07 20:52:27] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:52:27] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:52:27] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:52:27] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-07 20:52:27] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-07 20:52:27] INFO     - aegis.anomaly_detector - Analysis complete: status=medium
[2025-12-07 20:52:27] INFO     - aegis.node - Anomalies: medium, rate=8.60%
[2025-12-07 20:52:27] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:52:27] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-07 20:52:27] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-07 20:52:40] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-07 20:52:40] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-07 20:52:40] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-07 20:52:48] INFO     - aegis.voting - Consensus reached: 11b3d17dd1c8befc... with 50.50% (threshold: 50.00%)
[2025-12-07 20:52:48] INFO     - aegis.consensus - Vote consensus: 11b3d17d... (threshold: 50%, voters: 1)
[2025-12-07 20:52:50] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:52:50] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:52:50] INFO     - aegis.node - Round 6: Acc=0.819, F1=0.672
[2025-12-07 20:52:50] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-07 20:52:51] INFO     - aegis.audit - Block 4 added to chain: 00004856ce465eef...
[2025-12-07 20:52:51] DEBUG    - aegis.node - Completed: Round 6 in 23.291s
[2025-12-07 20:52:51] DEBUG    - aegis.node - Starting: Round 7
[2025-12-07 20:52:51] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:52:51] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:52:51] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:52:51] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-07 20:52:51] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-07 20:52:51] INFO     - aegis.anomaly_detector - Analysis complete: status=medium
[2025-12-07 20:52:51] INFO     - aegis.node - Anomalies: medium, rate=8.60%
[2025-12-07 20:52:51] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:52:51] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-07 20:52:51] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-07 20:53:04] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-07 20:53:04] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-07 20:53:04] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-07 20:53:12] INFO     - aegis.voting - Consensus reached: 1e8ff59c2728e178... with 50.50% (threshold: 50.00%)
[2025-12-07 20:53:12] INFO     - aegis.consensus - Vote consensus: 1e8ff59c... (threshold: 50%, voters: 1)
[2025-12-07 20:53:14] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:53:14] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:53:14] INFO     - aegis.node - Round 7: Acc=0.687, F1=0.000
[2025-12-07 20:53:14] DEBUG    - aegis.node - Completed: Round 7 in 23.050s
[2025-12-07 20:53:14] DEBUG    - aegis.node - Starting: Round 8
[2025-12-07 20:53:14] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:53:14] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:53:14] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:53:14] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-07 20:53:14] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-07 20:53:14] INFO     - aegis.anomaly_detector - Analysis complete: status=medium
[2025-12-07 20:53:14] INFO     - aegis.node - Anomalies: medium, rate=8.60%
[2025-12-07 20:53:14] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:53:14] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-07 20:53:14] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-07 20:53:27] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-07 20:53:27] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-07 20:53:27] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-07 20:53:35] INFO     - aegis.voting - Consensus reached: c5541dba792daf6c... with 50.50% (threshold: 50.00%)
[2025-12-07 20:53:35] INFO     - aegis.consensus - Vote consensus: c5541dba... (threshold: 50%, voters: 1)
[2025-12-07 20:53:37] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:53:37] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:53:37] INFO     - aegis.node - Round 8: Acc=0.769, F1=0.432
[2025-12-07 20:53:37] DEBUG    - aegis.node - Completed: Round 8 in 23.050s
[2025-12-07 20:53:37] DEBUG    - aegis.node - Starting: Round 9
[2025-12-07 20:53:37] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:53:37] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:53:37] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:53:37] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-07 20:53:37] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-07 20:53:37] INFO     - aegis.anomaly_detector - Analysis complete: status=medium
[2025-12-07 20:53:37] INFO     - aegis.node - Anomalies: medium, rate=8.60%
[2025-12-07 20:53:37] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:53:37] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-07 20:53:37] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-07 20:53:50] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-07 20:53:50] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-07 20:53:50] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-07 20:53:58] INFO     - aegis.voting - Consensus reached: cdbfa660a0588b87... with 50.50% (threshold: 50.00%)
[2025-12-07 20:53:58] INFO     - aegis.consensus - Vote consensus: cdbfa660... (threshold: 50%, voters: 1)
[2025-12-07 20:54:00] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:54:00] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:54:00] INFO     - aegis.node - Round 9: Acc=0.624, F1=0.588
[2025-12-07 20:54:00] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-07 20:54:00] INFO     - aegis.audit - Block 5 added to chain: 0000aabfd57181d9...
[2025-12-07 20:54:00] DEBUG    - aegis.node - Completed: Round 9 in 23.165s
[2025-12-07 20:54:00] DEBUG    - aegis.node - Starting: Round 10
[2025-12-07 20:54:00] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 20:54:00] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 20:54:00] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 20:54:00] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-07 20:54:00] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-07 20:54:00] INFO     - aegis.anomaly_detector - Analysis complete: status=medium
[2025-12-07 20:54:00] INFO     - aegis.node - Anomalies: medium, rate=8.60%
[2025-12-07 20:54:00] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 20:54:00] WARNING  - aegis.privacy.dp - Requested ε=1.0000, δ=1.0000e-06 exceeds budget. Using remaining: ε=1.0000, δ=1.0000e-06
[2025-12-07 20:54:00] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-07 20:54:00] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-07 20:54:13] INFO     - aegis.aggregation - Aggregation complete: 1/2 contributors, dimension=20
[2025-12-07 20:54:13] INFO     - aegis.node - Model updated with aggregated gradients
[2025-12-07 20:54:13] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-07 20:54:21] INFO     - aegis.voting - Consensus reached: c8954c5df19f9c33... with 50.50% (threshold: 50.00%)
[2025-12-07 20:54:21] INFO     - aegis.consensus - Vote consensus: c8954c5d... (threshold: 50%, voters: 1)
[2025-12-07 20:54:23] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:54:23] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:54:23] INFO     - aegis.node - Round 10: Acc=0.703, F1=0.097
[2025-12-07 20:54:23] DEBUG    - aegis.node - Completed: Round 10 in 23.072s
[2025-12-07 20:54:23] INFO     - aegis.node - Federated training complete
[2025-12-07 20:55:30] INFO     - aegis.voting - Consensus reached: 8b9d9da7e7094de9... with 50.50% (threshold: 50.00%)
[2025-12-07 20:55:30] INFO     - aegis.consensus - Vote consensus: 8b9d9da7... (threshold: 50%, voters: 1)
[2025-12-07 20:55:32] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:55:32] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:55:42] INFO     - aegis.voting - Consensus reached: 332797e5e8a4a738... with 50.00% (threshold: 50.00%)
[2025-12-07 20:55:42] INFO     - aegis.consensus - Vote consensus: 332797e5... (threshold: 50%, voters: 1)
[2025-12-07 20:55:44] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 20:55:44] ERROR    - aegis.consensus - Commit phase failed
[2025-12-07 20:55:48] INFO     - aegis.audit - Force mining pending transactions
[2025-12-07 20:55:48] INFO     - aegis.audit - Mining block with 1 transactions
[2025-12-07 20:55:48] INFO     - aegis.audit - Block 6 added to chain: 0000f0ab5a606418...
[2025-12-07 21:06:50] INFO     - aegis.node - Shutting down
[2025-12-07 21:06:53] ERROR    - aegis.peer.5001 - Error sending to 8e5c1f04d0a8a951a10ecbb5decc7cac7cf1a7ec838f5bb01ee4c732785a2abf: HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x72e20f6f0270>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-07 21:07:03] ERROR    - aegis.peer.5001 - Error sending to 8e5c1f04d0a8a951a10ecbb5decc7cac7cf1a7ec838f5bb01ee4c732785a2abf: HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x72e20f6f3020>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-07 21:07:13] ERROR    - aegis.peer.5001 - Error sending to 8e5c1f04d0a8a951a10ecbb5decc7cac7cf1a7ec838f5bb01ee4c732785a2abf: HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x72e20f6f3020>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-07 21:07:23] ERROR    - aegis.peer.5001 - Error sending to 8e5c1f04d0a8a951a10ecbb5decc7cac7cf1a7ec838f5bb01ee4c732785a2abf: HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x72e20f6f0270>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-07 21:07:33] ERROR    - aegis.peer.5001 - Error sending to 8e5c1f04d0a8a951a10ecbb5decc7cac7cf1a7ec838f5bb01ee4c732785a2abf: HTTPConnectionPool(host='localhost', port=5000): Max retries exceeded with url: /message (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x72e20f6f2cf0>: Failed to establish a new connection: [Errno 111] Connection refused'))
[2025-12-07 21:07:33] WARNING  - aegis.peer.5001 - Removing unresponsive peer 8e5c1f04d0a8a951a10ecbb5decc7cac7cf1a7ec838f5bb01ee4c732785a2abf
[2025-12-07 21:07:33] INFO     - aegis.peer.5001 - Removed peer 8e5c1f04d0a8a951a10ecbb5decc7cac7cf1a7ec838f5bb01ee4c732785a2abf
[2025-12-07 21:07:51] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-07 21:07:51] INFO     - aegis.node - Initializing node: Hospital_A (154b6c6d...)
[2025-12-07 21:07:51] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-07 21:07:51] INFO     - aegis.audit - Genesis block created
[2025-12-07 21:07:51] INFO     - aegis.node - Generating synthetic data
[2025-12-07 21:07:51] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-07 21:07:51] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-07 21:07:51] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 21:07:51] INFO     - aegis.node - ✓ Node initialization complete
[2025-12-07 21:07:51] INFO     - aegis.peer.5000 - Peer manager started on 0.0.0.0:5000
[2025-12-07 21:07:51] INFO     - aegis.node - ✓ Network created: 3ca5f9187b266c87f2c808bb9ec9e555
[2025-12-07 21:07:51] INFO     - aegis.main - ============================================================
[2025-12-07 21:07:51] INFO     - aegis.main - NETWORK ID: 3ca5f9187b266c87f2c808bb9ec9e555
[2025-12-07 21:07:51] INFO     - aegis.main - ============================================================
[2025-12-07 21:07:51] INFO     - aegis.main - Share this Network ID with other nodes to join
[2025-12-07 21:07:51] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-07 21:07:51] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-07 21:07:51] ERROR    - aegis.main - Fatal error: 'PeerManager' object has no attribute 'get_local_ip'
Traceback (most recent call last):
  File "/home/liminal_mradul/aegis (Copy)/main.py", line 203, in main
    node.start_interactive_shell()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 405, in start_interactive_shell
    info = self.get_network_info()
  File "/home/liminal_mradul/aegis (Copy)/src/node.py", line 232, in get_network_info
    local_ip = self.peer_manager.get_local_ip()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'PeerManager' object has no attribute 'get_local_ip'
[2025-12-07 21:20:28] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-07 21:20:28] INFO     - aegis.node - Initializing node: Hospital_A (a6db4e67...)
[2025-12-07 21:20:28] INFO     - aegis.peer.5000 - Peer manager initialized on 0.0.0.0:5000
[2025-12-07 21:20:28] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-07 21:20:28] INFO     - aegis.audit - Genesis block created
[2025-12-07 21:20:28] INFO     - aegis.node - Generating synthetic data
[2025-12-07 21:20:28] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-07 21:20:28] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-07 21:20:28] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 21:20:28] INFO     - aegis.node - ✓ Node initialization complete
[2025-12-07 21:20:28] INFO     - aegis.peer.5000 - ✓ Server started on 0.0.0.0:5000
[2025-12-07 21:20:29] INFO     - aegis.node - ✓ Network created: d724545957435d778395f70f7ae7a1fa
[2025-12-07 21:20:29] INFO     - aegis.main - ============================================================
[2025-12-07 21:20:29] INFO     - aegis.main - NETWORK ID: d724545957435d778395f70f7ae7a1fa
[2025-12-07 21:20:29] INFO     - aegis.main - ============================================================
[2025-12-07 21:20:29] INFO     - aegis.main - Share this Network ID with other nodes to join
[2025-12-07 21:20:29] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-07 21:20:29] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-07 21:21:22] INFO     - aegis.node - Shutting down
[2025-12-07 21:21:41] INFO     - aegis.node -  Starting federated training: 10 rounds
[2025-12-07 21:21:41] WARNING  - aegis.node - ⚠ No peers - running in local mode
[2025-12-07 21:21:41] INFO     - aegis.node - Privacy budget per round: ε=1.000000, δ=1.000000e-06
[2025-12-07 21:21:41] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 21:21:41] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 21:21:41] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 21:21:41] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 21:21:41] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 21:21:41] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 21:21:41] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 21:21:41] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 21:21:41] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 21:21:41] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 21:21:41] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-07 21:21:41] INFO     - aegis.audit - Block 1 added to chain: 00001481615f8c62...
[2025-12-07 21:21:41] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 21:21:41] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 21:21:41] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 21:21:41] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 21:21:41] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 21:21:41] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 21:21:41] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 21:21:41] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 21:21:41] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 21:21:41] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 21:21:41] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 21:21:41] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 21:21:41] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 21:21:41] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 21:21:41] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 21:21:41] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-07 21:21:41] INFO     - aegis.audit - Block 2 added to chain: 0000fdb07e7fc5f7...
[2025-12-07 21:21:41] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 21:21:41] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 21:21:41] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 21:21:41] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 21:21:41] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 21:21:41] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 21:21:41] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 21:21:41] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 21:21:41] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 21:21:41] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 21:21:41] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 21:21:41] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 21:21:41] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 21:21:41] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 21:21:41] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 21:21:41] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-07 21:21:41] INFO     - aegis.audit - Block 3 added to chain: 00008f33f28dc9e6...
[2025-12-07 21:21:41] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 21:21:41] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 21:21:41] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 21:21:41] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 21:21:41] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 21:21:41] INFO     - aegis.node - Step 1/5: Local training
[2025-12-07 21:21:41] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-07 21:21:41] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-07 21:21:41] WARNING  - aegis.privacy.dp - Requested ε=1.0000, δ=1.0000e-06 exceeds budget. Using remaining: ε=1.0000, δ=1.0000e-06
[2025-12-07 21:21:41] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-07 21:21:41] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-07 21:21:41] INFO     - aegis.node - ✓ Federated training complete
[2025-12-07 21:22:29] INFO     - aegis.main - Initializing node: Hospital_B on port 5001
[2025-12-07 21:22:29] INFO     - aegis.node - Initializing node: Hospital_B (bf238706...)
[2025-12-07 21:22:29] INFO     - aegis.peer.5001 - Peer manager initialized on 0.0.0.0:5001
[2025-12-07 21:22:29] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-07 21:22:29] INFO     - aegis.audit - Genesis block created
[2025-12-07 21:22:29] INFO     - aegis.node - Generating synthetic data
[2025-12-07 21:22:29] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-07 21:22:29] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-07 21:22:29] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-07 21:22:29] INFO     - aegis.node - ✓ Node initialization complete
[2025-12-07 21:22:29] INFO     - aegis.peer.5001 - ✓ Server started on 0.0.0.0:5001
[2025-12-07 21:22:30] INFO     - aegis.node - ✓ Joined network: d724545957435d778395f70f7ae7a1fa
[2025-12-07 21:22:30] INFO     - aegis.main - Joined network: d724545957435d778395f70f7ae7a1fa
[2025-12-07 21:22:30] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-07 21:22:30] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-07 21:23:47] INFO     - aegis.peer.5001 - ✓ Added peer a6db4e67... at http://10.38.222.130:5000
[2025-12-07 21:23:47] INFO     - aegis.peer.5000 - ✓ Added peer bf238706... at http://10.38.222.130:5001
[2025-12-07 21:23:47] INFO     - aegis.node - ✓ Bidirectional registration successful
[2025-12-07 21:23:47] INFO     - aegis.node - ✓ Connected to peer: http://10.38.222.130:5000
[2025-12-07 21:24:06] INFO     - aegis.peer.5000 - ✓ Added peer bf238706... at http://10.38.222.130:5001
[2025-12-07 21:24:06] INFO     - aegis.node - ✓ Bidirectional registration successful
[2025-12-07 21:24:06] INFO     - aegis.node - ✓ Connected to peer: http://10.38.222.130:5001
[2025-12-07 21:24:25] INFO     - aegis.voting - Consensus reached: 1ef18ce16e8d1de5... with 50.00% (threshold: 50.00%)
[2025-12-07 21:24:25] INFO     - aegis.consensus - Vote consensus: 1ef18ce1... (threshold: 50%, voters: 1)
[2025-12-07 21:24:27] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-07 21:24:27] ERROR    - aegis.consensus - Commit phase failed
[2025-12-08 09:50:44] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-08 09:50:44] INFO     - aegis.node - Initializing node: Hospital_A (c9a1e3b4...)
[2025-12-08 09:50:44] INFO     - aegis.peer.5000 - Peer manager initialized on 0.0.0.0:5000
[2025-12-08 09:50:44] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-08 09:50:45] INFO     - aegis.audit - Genesis block created
[2025-12-08 09:50:45] INFO     - aegis.node - Generating synthetic data
[2025-12-08 09:50:45] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-08 09:50:45] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-08 09:50:45] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-08 09:50:45] DEBUG    - aegis.node - All components initialized
[2025-12-08 09:50:45] INFO     - aegis.node - ✓ Node initialization complete
[2025-12-08 09:50:45] INFO     - aegis.peer.5000 - ✓ Server started on 0.0.0.0:5000
[2025-12-08 09:50:46] INFO     - aegis.node - ✓ Network created: 94a447cc6ea3dc9b6482d15baca55953
[2025-12-08 09:50:46] INFO     - aegis.main - ============================================================
[2025-12-08 09:50:46] INFO     - aegis.main - NETWORK ID: 94a447cc6ea3dc9b6482d15baca55953
[2025-12-08 09:50:46] INFO     - aegis.main - ============================================================
[2025-12-08 09:50:46] INFO     - aegis.main - Share this Network ID with other nodes to join
[2025-12-08 09:50:46] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-08 09:50:46] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-10 22:07:09] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-10 22:07:09] INFO     - aegis.node - Initializing node: Hospital_A (d4000822...)
[2025-12-10 22:07:09] INFO     - aegis.peer.5000 - Peer manager initialized on 0.0.0.0:5000
[2025-12-10 22:07:09] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-10 22:07:09] INFO     - aegis.audit - Genesis block created
[2025-12-10 22:07:09] INFO     - aegis.node - Generating synthetic data
[2025-12-10 22:07:09] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-10 22:07:09] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-10 22:07:09] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-10 22:07:09] DEBUG    - aegis.node - All components initialized
[2025-12-10 22:07:09] INFO     - aegis.node - ✓ Node initialization complete
[2025-12-10 22:07:09] INFO     - aegis.peer.5000 - ✓ Server started on 0.0.0.0:5000
[2025-12-10 22:07:09] INFO     - aegis.node - ✓ Network created: 4c17958f056c477bb72e07a1e43a9ec6
[2025-12-10 22:07:09] INFO     - aegis.main - ============================================================
[2025-12-10 22:07:09] INFO     - aegis.main - NETWORK ID: 4c17958f056c477bb72e07a1e43a9ec6
[2025-12-10 22:07:09] INFO     - aegis.main - ============================================================
[2025-12-10 22:07:09] INFO     - aegis.main - Share this Network ID with other nodes to join
[2025-12-10 22:07:09] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-10 22:07:09] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-10 22:07:43] INFO     - aegis.node -  Starting federated training: 10 rounds
[2025-12-10 22:07:43] WARNING  - aegis.node - ⚠ No peers - running in local mode
[2025-12-10 22:07:43] INFO     - aegis.node - Privacy budget per round: ε=1.000000, δ=1.000000e-06
[2025-12-10 22:07:43] DEBUG    - aegis.node - Starting: Round 1
[2025-12-10 22:07:43] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:43] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:43] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:43] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 22:07:43] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 22:07:43] DEBUG    - aegis.node - Completed: Round 1 in 0.017s
[2025-12-10 22:07:43] DEBUG    - aegis.node - Starting: Round 2
[2025-12-10 22:07:43] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:43] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:43] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:43] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 22:07:43] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 22:07:43] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-10 22:07:43] INFO     - aegis.audit - Block 1 added to chain: 0000f04152b90879...
[2025-12-10 22:07:43] DEBUG    - aegis.node - Completed: Round 2 in 0.116s
[2025-12-10 22:07:43] DEBUG    - aegis.node - Starting: Round 3
[2025-12-10 22:07:43] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:43] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:43] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:43] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 22:07:43] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 22:07:43] DEBUG    - aegis.node - Completed: Round 3 in 0.013s
[2025-12-10 22:07:43] DEBUG    - aegis.node - Starting: Round 4
[2025-12-10 22:07:43] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:43] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:43] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:43] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 22:07:43] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 22:07:43] DEBUG    - aegis.node - Completed: Round 4 in 0.016s
[2025-12-10 22:07:43] DEBUG    - aegis.node - Starting: Round 5
[2025-12-10 22:07:43] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:43] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:43] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:43] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 22:07:43] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 22:07:43] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-10 22:07:43] INFO     - aegis.audit - Block 2 added to chain: 0000e57bae9f24be...
[2025-12-10 22:07:43] DEBUG    - aegis.node - Completed: Round 5 in 0.522s
[2025-12-10 22:07:43] DEBUG    - aegis.node - Starting: Round 6
[2025-12-10 22:07:43] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:43] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:43] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:43] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 22:07:43] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 22:07:43] DEBUG    - aegis.node - Completed: Round 6 in 0.018s
[2025-12-10 22:07:43] DEBUG    - aegis.node - Starting: Round 7
[2025-12-10 22:07:43] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:43] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:43] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:43] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 22:07:43] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 22:07:43] DEBUG    - aegis.node - Completed: Round 7 in 0.019s
[2025-12-10 22:07:43] DEBUG    - aegis.node - Starting: Round 8
[2025-12-10 22:07:43] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:43] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:43] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:43] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 22:07:43] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 22:07:43] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-10 22:07:44] INFO     - aegis.audit - Block 3 added to chain: 00006c044a33f785...
[2025-12-10 22:07:44] DEBUG    - aegis.node - Completed: Round 8 in 0.224s
[2025-12-10 22:07:44] DEBUG    - aegis.node - Starting: Round 9
[2025-12-10 22:07:44] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:44] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:44] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:44] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 22:07:44] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 22:07:44] DEBUG    - aegis.node - Completed: Round 9 in 0.023s
[2025-12-10 22:07:44] DEBUG    - aegis.node - Starting: Round 10
[2025-12-10 22:07:44] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:44] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:44] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:44] WARNING  - aegis.privacy.dp - Requested ε=1.0000, δ=1.0000e-06 exceeds budget. Using remaining: ε=1.0000, δ=1.0000e-06
[2025-12-10 22:07:44] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 22:07:44] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 22:07:44] DEBUG    - aegis.node - Completed: Round 10 in 0.022s
[2025-12-10 22:07:44] INFO     - aegis.node - ✓ Federated training complete
[2025-12-10 22:07:53] INFO     - aegis.node -  Starting federated training: 10 rounds
[2025-12-10 22:07:53] WARNING  - aegis.node - ⚠ No peers - running in local mode
[2025-12-10 22:07:53] INFO     - aegis.node - Privacy budget per round: ε=0.000000, δ=0.000000e+00
[2025-12-10 22:07:53] DEBUG    - aegis.node - Starting: Round 1
[2025-12-10 22:07:53] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:53] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:53] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:53] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-10 22:07:53] DEBUG    - aegis.node - Completed: Round 1 in 0.015s
[2025-12-10 22:07:53] DEBUG    - aegis.node - Starting: Round 2
[2025-12-10 22:07:53] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:53] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:53] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:53] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-10 22:07:53] DEBUG    - aegis.node - Completed: Round 2 in 0.037s
[2025-12-10 22:07:53] DEBUG    - aegis.node - Starting: Round 3
[2025-12-10 22:07:53] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:53] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:53] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:53] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-10 22:07:53] DEBUG    - aegis.node - Completed: Round 3 in 0.016s
[2025-12-10 22:07:53] DEBUG    - aegis.node - Starting: Round 4
[2025-12-10 22:07:53] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:53] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:53] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:53] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-10 22:07:53] DEBUG    - aegis.node - Completed: Round 4 in 0.010s
[2025-12-10 22:07:53] DEBUG    - aegis.node - Starting: Round 5
[2025-12-10 22:07:53] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:53] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:53] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:53] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-10 22:07:53] DEBUG    - aegis.node - Completed: Round 5 in 0.009s
[2025-12-10 22:07:53] DEBUG    - aegis.node - Starting: Round 6
[2025-12-10 22:07:53] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:53] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:53] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:53] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-10 22:07:53] DEBUG    - aegis.node - Completed: Round 6 in 0.016s
[2025-12-10 22:07:53] DEBUG    - aegis.node - Starting: Round 7
[2025-12-10 22:07:53] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:53] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:53] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:53] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-10 22:07:53] DEBUG    - aegis.node - Completed: Round 7 in 0.017s
[2025-12-10 22:07:53] DEBUG    - aegis.node - Starting: Round 8
[2025-12-10 22:07:53] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:53] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:53] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:53] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-10 22:07:53] DEBUG    - aegis.node - Completed: Round 8 in 0.014s
[2025-12-10 22:07:53] DEBUG    - aegis.node - Starting: Round 9
[2025-12-10 22:07:53] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:53] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:53] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:53] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-10 22:07:53] DEBUG    - aegis.node - Completed: Round 9 in 0.020s
[2025-12-10 22:07:53] DEBUG    - aegis.node - Starting: Round 10
[2025-12-10 22:07:53] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 22:07:53] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 22:07:53] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 22:07:53] ERROR    - aegis.node - Privacy error: Privacy budget exhausted: epsilon must be > 0. Reset budget with 'reset_budget' command.
[2025-12-10 22:07:53] DEBUG    - aegis.node - Completed: Round 10 in 0.016s
[2025-12-10 22:07:53] INFO     - aegis.node - ✓ Federated training complete
[2025-12-10 22:08:42] WARNING  - aegis.privacy.budget - Privacy budget reset - all consumption history cleared
[2025-12-10 22:08:42] INFO     - aegis.node - ✓ Budget reset
[2025-12-10 22:09:56] INFO     - aegis.main - Initializing node: Hospital_B on port 5001
[2025-12-10 22:09:56] INFO     - aegis.node - Initializing node: Hospital_B (d4e19a22...)
[2025-12-10 22:09:56] INFO     - aegis.peer.5001 - Peer manager initialized on 0.0.0.0:5001
[2025-12-10 22:09:56] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-10 22:09:57] INFO     - aegis.audit - Genesis block created
[2025-12-10 22:09:57] INFO     - aegis.node - Generating synthetic data
[2025-12-10 22:09:57] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-10 22:09:57] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-10 22:09:57] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-10 22:09:57] INFO     - aegis.node - ✓ Node initialization complete
[2025-12-10 22:09:57] INFO     - aegis.peer.5001 - ✓ Server started on 0.0.0.0:5001
[2025-12-10 22:09:57] INFO     - aegis.node - ✓ Joined network: 4c17958f056c477bb72e07a1e43a9ec6
[2025-12-10 22:09:57] INFO     - aegis.main - Joined network: 4c17958f056c477bb72e07a1e43a9ec6
[2025-12-10 22:09:57] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-10 22:09:57] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-10 22:10:09] INFO     - aegis.voting - Consensus reached: 5cc82ee54b77183e... with 100.00% (threshold: 50.00%)
[2025-12-10 22:10:09] INFO     - aegis.consensus - Vote consensus: 5cc82ee5... (threshold: 50%, voters: 1)
[2025-12-10 22:10:09] INFO     - aegis.consensus - Consensus finalized: round 1, hash 5cc82ee5..., 1/1 commits
[2025-12-10 22:10:09] INFO     - aegis.consensus - Consensus reached for round 1
[2025-12-10 22:10:47] ERROR    - aegis.node - Could not reach peer at http://192.168.1.100:5001: HTTPConnectionPool(host='192.168.1.100', port=5001): Max retries exceeded with url: /health (Caused by ConnectTimeoutError(<urllib3.connection.HTTPConnection object at 0x773a71c774d0>, 'Connection to 192.168.1.100 timed out. (connect timeout=3)'))
[2025-12-10 22:11:11] DEBUG    - aegis.node - Got peer ID: d4e19a221bd785df...
[2025-12-10 22:11:11] INFO     - aegis.peer.5000 - ✓ Added peer d4e19a22... at http://192.168.1.4:5001
[2025-12-10 22:11:11] INFO     - aegis.peer.5001 - ✓ Added peer d4000822... at http://192.168.1.4:5000
[2025-12-10 22:11:11] INFO     - aegis.node - ✓ Bidirectional registration successful
[2025-12-10 22:11:11] INFO     - aegis.node - ✓ Connected to peer: http://192.168.1.4:5001
[2025-12-10 22:11:34] INFO     - aegis.voting - Consensus reached: 726510bcecc77b0a... with 50.50% (threshold: 50.00%)
[2025-12-10 22:11:34] INFO     - aegis.consensus - Vote consensus: 726510bc... (threshold: 50%, voters: 1)
[2025-12-10 22:11:36] WARNING  - aegis.consensus - Insufficient commits: 1/2 (need 2)
[2025-12-10 22:11:36] ERROR    - aegis.consensus - Commit phase failed
[2025-12-10 23:31:38] INFO     - aegis.node - Shutting down
[2025-12-10 23:32:20] WARNING  - aegis.peer.5001 - Removing unresponsive peer d4000822...
[2025-12-10 23:32:20] INFO     - aegis.peer.5001 - ✗ Removed peer d4000822...
[2025-12-10 23:54:06] INFO     - aegis.main - Initializing node: A on port 5000
[2025-12-10 23:54:06] INFO     - aegis.node - Initializing node: A (3142ef71...)
[2025-12-10 23:54:06] INFO     - aegis.peer.5000 - Peer manager initialized on 0.0.0.0:5000
[2025-12-10 23:54:06] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-10 23:54:06] INFO     - aegis.audit - Genesis block created
[2025-12-10 23:54:06] INFO     - aegis.node - Generating synthetic data
[2025-12-10 23:54:06] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-10 23:54:06] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-10 23:54:06] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-10 23:54:06] INFO     - aegis.node - ✓ Node initialization complete
[2025-12-10 23:54:06] INFO     - aegis.peer.5000 - ✓ Server started on 0.0.0.0:5000
[2025-12-10 23:54:07] INFO     - aegis.node - ✓ Network created: 0a399aadef8ae3a22f2b4566e1c5c84a
[2025-12-10 23:54:07] INFO     - aegis.main - ============================================================
[2025-12-10 23:54:07] INFO     - aegis.main - NETWORK ID: 0a399aadef8ae3a22f2b4566e1c5c84a
[2025-12-10 23:54:07] INFO     - aegis.main - ============================================================
[2025-12-10 23:54:07] INFO     - aegis.main - Share this Network ID with other nodes to join
[2025-12-10 23:54:07] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-10 23:54:07] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-10 23:54:12] INFO     - aegis.node - Shutting down
[2025-12-10 23:59:25] INFO     - aegis.node - 🚀 Starting federated training: 5 rounds
[2025-12-10 23:59:25] WARNING  - aegis.node - ⚠ No peers - running in local mode
[2025-12-10 23:59:25] INFO     - aegis.node - Privacy budget per round: ε=2.000000, δ=2.000000e-06
[2025-12-10 23:59:25] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 23:59:25] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 23:59:25] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 23:59:25] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 23:59:25] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 23:59:25] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 23:59:25] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 23:59:25] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 23:59:25] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 23:59:25] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 23:59:25] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-10 23:59:25] INFO     - aegis.audit - Block 1 added to chain: 000058b16de7456f...
[2025-12-10 23:59:25] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 23:59:25] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 23:59:25] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 23:59:25] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 23:59:25] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 23:59:25] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 23:59:25] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 23:59:25] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 23:59:25] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 23:59:25] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 23:59:25] INFO     - aegis.node - Step 1/5: Local training
[2025-12-10 23:59:25] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-10 23:59:25] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-10 23:59:25] WARNING  - aegis.privacy.dp - Requested ε=2.0000, δ=2.0000e-06 exceeds budget. Using remaining: ε=2.0000, δ=2.0000e-06
[2025-12-10 23:59:25] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-10 23:59:25] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-10 23:59:25] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-10 23:59:25] INFO     - aegis.audit - Block 2 added to chain: 00007f7ce14b02ff...
[2025-12-10 23:59:25] INFO     - aegis.node - ✓ Federated training complete
[2025-12-11 00:00:00] INFO     - aegis.main - Initializing node: B on port 5001
[2025-12-11 00:00:00] INFO     - aegis.node - Initializing node: B (cda6ae46...)
[2025-12-11 00:00:00] INFO     - aegis.peer.5001 - Peer manager initialized on 0.0.0.0:5001
[2025-12-11 00:00:00] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-11 00:00:00] INFO     - aegis.audit - Genesis block created
[2025-12-11 00:00:00] INFO     - aegis.node - Generating synthetic data
[2025-12-11 00:00:00] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-11 00:00:00] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-11 00:00:00] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-11 00:00:00] INFO     - aegis.node - ✓ Node initialization complete
[2025-12-11 00:00:00] INFO     - aegis.peer.5001 - ✓ Server started on 0.0.0.0:5001
[2025-12-11 00:00:01] INFO     - aegis.node - ✓ Joined network: 0a399aadef8ae3a22f2b4566e1c5c84a
[2025-12-11 00:00:01] INFO     - aegis.main - Joined network: 0a399aadef8ae3a22f2b4566e1c5c84a
[2025-12-11 00:00:01] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-11 00:00:01] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-11 00:00:23] INFO     - aegis.peer.5001 - ✓ Added peer 3142ef71... at http://192.168.1.4:5000
[2025-12-11 00:00:23] INFO     - aegis.peer.5000 - ✓ Added peer cda6ae46... at http://192.168.1.4:5001
[2025-12-11 00:00:23] INFO     - aegis.node - ✓ Bidirectional registration successful
[2025-12-11 00:00:23] INFO     - aegis.node - ✓ Connected to peer: http://192.168.1.4:5000
[2025-12-11 00:00:36] INFO     - aegis.voting - Consensus reached: 53ca2ecff8de767c... with 50.00% (threshold: 50.00%)
[2025-12-11 00:00:36] INFO     - aegis.consensus - Vote consensus: 53ca2ecf... (threshold: 50%, voters: 1)
[2025-12-11 00:00:41] INFO     - aegis.consensus - ✓ Consensus finalized: round 1, hash 53ca2ecf, 1/1 commits
[2025-12-11 00:00:41] INFO     - aegis.consensus - Consensus reached for round 1
[2025-12-11 00:00:53] INFO     - aegis.audit - Mining block with 1 transactions
[2025-12-11 00:00:53] INFO     - aegis.audit - Block 1 added to chain: 000030e315e6623c...
[2025-12-11 00:07:26] INFO     - aegis.voting - Consensus reached: 80ac9c051614ec46... with 50.50% (threshold: 50.00%)
[2025-12-11 00:07:26] INFO     - aegis.consensus - Vote consensus: 80ac9c05... (threshold: 50%, voters: 1)
[2025-12-11 00:07:31] INFO     - aegis.consensus - ✓ Consensus finalized: round 2, hash 80ac9c05, 1/1 commits
[2025-12-11 00:07:31] INFO     - aegis.consensus - Consensus reached for round 2
[2025-12-11 00:07:38] INFO     - aegis.node - 🚀 Starting federated training: 5 rounds
[2025-12-11 00:07:38] INFO     - aegis.node - ✓ Training with 1 peers
[2025-12-11 00:07:38] INFO     - aegis.node - Privacy budget per round: ε=2.000000, δ=2.000000e-06
[2025-12-11 00:07:38] INFO     - aegis.node - Step 1/5: Local training
[2025-12-11 00:07:38] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-11 00:07:38] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-11 00:07:38] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-11 00:07:38] WARNING  - aegis.aggregation - Still no private key, skipping cda6ae46
[2025-12-11 00:07:43] INFO     - aegis.aggregation - Key exchange complete: 0/1 shared secrets established
[2025-12-11 00:07:43] WARNING  - aegis.aggregation - Failed to establish keys with 1 peers. Check network connectivity.
[2025-12-11 00:07:43] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-11 00:07:56] WARNING  - aegis.aggregation - Only received 1/2 contributions. Proceeding with available data.
[2025-12-11 00:07:56] INFO     - aegis.aggregation - ✓ Aggregation complete: 1 contributors, dimension=20
[2025-12-11 00:07:56] INFO     - aegis.node - ✓ Model updated with aggregated gradients
[2025-12-11 00:07:56] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-11 00:08:04] INFO     - aegis.voting - Consensus reached: d1412a9128a1a8f4... with 50.98% (threshold: 50.00%)
[2025-12-11 00:08:04] INFO     - aegis.consensus - Vote consensus: d1412a91... (threshold: 50%, voters: 1)
[2025-12-11 00:08:09] INFO     - aegis.consensus - ✓ Consensus finalized: round 3, hash d1412a91, 1/1 commits
[2025-12-11 00:08:09] INFO     - aegis.consensus - Consensus reached for round 3
[2025-12-11 00:08:09] INFO     - aegis.node - Step 1/5: Local training
[2025-12-11 00:08:09] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-11 00:08:09] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-11 00:08:09] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-11 00:08:09] INFO     - aegis.anomaly_detector - Analysis complete: status=critical
[2025-12-11 00:08:09] INFO     - aegis.node - Anomaly status: critical, rate=56.95%
[2025-12-11 00:08:09] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-11 00:08:09] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-11 00:08:09] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-11 00:08:22] WARNING  - aegis.aggregation - Only received 1/2 contributions. Proceeding with available data.
[2025-12-11 00:08:22] INFO     - aegis.aggregation - ✓ Aggregation complete: 1 contributors, dimension=20
[2025-12-11 00:08:22] INFO     - aegis.node - ✓ Model updated with aggregated gradients
[2025-12-11 00:08:22] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-11 00:08:30] INFO     - aegis.voting - Consensus reached: 412eb33fb05875c9... with 51.46% (threshold: 50.00%)
[2025-12-11 00:08:30] INFO     - aegis.consensus - Vote consensus: 412eb33f... (threshold: 50%, voters: 1)
[2025-12-11 00:08:35] INFO     - aegis.consensus - ✓ Consensus finalized: round 4, hash 412eb33f, 1/1 commits
[2025-12-11 00:08:35] INFO     - aegis.consensus - Consensus reached for round 4
[2025-12-11 00:08:35] INFO     - aegis.node - Step 1/5: Local training
[2025-12-11 00:08:35] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-11 00:08:35] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-11 00:08:35] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-11 00:08:35] INFO     - aegis.anomaly_detector - Analysis complete: status=critical
[2025-12-11 00:08:35] INFO     - aegis.node - Anomaly status: critical, rate=56.95%
[2025-12-11 00:08:35] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-11 00:08:35] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-11 00:08:35] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-11 00:08:48] WARNING  - aegis.aggregation - Only received 1/2 contributions. Proceeding with available data.
[2025-12-11 00:08:48] INFO     - aegis.aggregation - ✓ Aggregation complete: 1 contributors, dimension=20
[2025-12-11 00:08:48] INFO     - aegis.node - ✓ Model updated with aggregated gradients
[2025-12-11 00:08:48] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-11 00:08:56] INFO     - aegis.voting - Consensus reached: e0a2fa77ddb40e42... with 51.92% (threshold: 50.00%)
[2025-12-11 00:08:56] INFO     - aegis.consensus - Vote consensus: e0a2fa77... (threshold: 50%, voters: 1)
[2025-12-11 00:09:01] INFO     - aegis.consensus - ✓ Consensus finalized: round 5, hash e0a2fa77, 1/1 commits
[2025-12-11 00:09:01] INFO     - aegis.consensus - Consensus reached for round 5
[2025-12-11 00:09:01] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-11 00:09:02] INFO     - aegis.audit - Block 2 added to chain: 00005dc395768371...
[2025-12-11 00:09:02] INFO     - aegis.node - Step 1/5: Local training
[2025-12-11 00:09:02] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-11 00:09:02] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-11 00:09:02] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-11 00:09:02] INFO     - aegis.anomaly_detector - Analysis complete: status=critical
[2025-12-11 00:09:02] INFO     - aegis.node - Anomaly status: critical, rate=56.95%
[2025-12-11 00:09:02] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-11 00:09:02] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-11 00:09:02] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-11 00:09:15] WARNING  - aegis.aggregation - Only received 1/2 contributions. Proceeding with available data.
[2025-12-11 00:09:15] INFO     - aegis.aggregation - ✓ Aggregation complete: 1 contributors, dimension=20
[2025-12-11 00:09:15] INFO     - aegis.node - ✓ Model updated with aggregated gradients
[2025-12-11 00:09:15] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-11 00:09:23] INFO     - aegis.voting - Consensus reached: e1b4d08b201534e1... with 52.38% (threshold: 50.00%)
[2025-12-11 00:09:23] INFO     - aegis.consensus - Vote consensus: e1b4d08b... (threshold: 50%, voters: 1)
[2025-12-11 00:09:28] INFO     - aegis.consensus - ✓ Consensus finalized: round 6, hash e1b4d08b, 1/1 commits
[2025-12-11 00:09:28] INFO     - aegis.consensus - Consensus reached for round 6
[2025-12-11 00:09:28] INFO     - aegis.node - Step 1/5: Local training
[2025-12-11 00:09:28] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-11 00:09:28] INFO     - aegis.node - Step 3/5: Anomaly detection
[2025-12-11 00:09:28] INFO     - aegis.anomaly_detector - Running comprehensive anomaly analysis
[2025-12-11 00:09:28] INFO     - aegis.anomaly_detector - Analysis complete: status=critical
[2025-12-11 00:09:28] INFO     - aegis.node - Anomaly status: critical, rate=56.95%
[2025-12-11 00:09:28] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-11 00:09:28] WARNING  - aegis.privacy.dp - Requested ε=2.0000, δ=2.0000e-06 exceeds budget. Using remaining: ε=2.0000, δ=2.0000e-06
[2025-12-11 00:09:28] INFO     - aegis.node - Step 5/5: Secure aggregation
[2025-12-11 00:09:28] WARNING  - aegis.aggregation - No shared secrets established - using unmasked values
[2025-12-11 00:09:41] WARNING  - aegis.aggregation - Only received 1/2 contributions. Proceeding with available data.
[2025-12-11 00:09:41] INFO     - aegis.aggregation - ✓ Aggregation complete: 1 contributors, dimension=20
[2025-12-11 00:09:41] INFO     - aegis.node - ✓ Model updated with aggregated gradients
[2025-12-11 00:09:41] INFO     - aegis.anomaly_detector - Updated network reference statistics
[2025-12-11 00:09:49] INFO     - aegis.voting - Consensus reached: 33ca1eed537d9e3a... with 52.83% (threshold: 50.00%)
[2025-12-11 00:09:49] INFO     - aegis.consensus - Vote consensus: 33ca1eed... (threshold: 50%, voters: 1)
[2025-12-11 00:09:54] INFO     - aegis.consensus - ✓ Consensus finalized: round 7, hash 33ca1eed, 1/1 commits
[2025-12-11 00:09:54] INFO     - aegis.consensus - Consensus reached for round 7
[2025-12-11 00:09:54] INFO     - aegis.node - ✓ Federated training complete
[2025-12-11 00:37:53] WARNING  - aegis.peer.5001 - Removing unresponsive peer 3142ef71...
[2025-12-11 00:37:53] INFO     - aegis.peer.5001 - ✗ Removed peer 3142ef71...
[2025-12-11 09:43:17] INFO     - aegis.main - Initializing node: Hospital_A on port 5000
[2025-12-11 09:43:17] INFO     - aegis.node - Initializing node: Hospital_A (ad9c2208...)
[2025-12-11 09:43:17] INFO     - aegis.peer.5000 - Peer manager initialized on 0.0.0.0:5000
[2025-12-11 09:43:17] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-11 09:43:17] INFO     - aegis.audit - Genesis block created
[2025-12-11 09:43:17] INFO     - aegis.node - Generating synthetic data
[2025-12-11 09:43:17] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-11 09:43:17] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-11 09:43:17] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-11 09:43:17] DEBUG    - aegis.node - All components initialized
[2025-12-11 09:43:17] INFO     - aegis.node - ✓ Node initialization complete
[2025-12-11 09:43:17] INFO     - aegis.peer.5000 - ✓ Server started on 0.0.0.0:5000
[2025-12-11 09:43:18] INFO     - aegis.node - ✓ Network created: f5e2c65b065f020e0e3c55ea2d66cc03
[2025-12-11 09:43:18] INFO     - aegis.main - ============================================================
[2025-12-11 09:43:18] INFO     - aegis.main - NETWORK ID: f5e2c65b065f020e0e3c55ea2d66cc03
[2025-12-11 09:43:18] INFO     - aegis.main - ============================================================
[2025-12-11 09:43:18] INFO     - aegis.main - Share this Network ID with other nodes to join
[2025-12-11 09:43:18] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-11 09:43:18] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-11 09:45:05] INFO     - aegis.node - 🚀 Starting federated training: 5 rounds
[2025-12-11 09:45:05] WARNING  - aegis.node - ⚠ No peers - running in local mode
[2025-12-11 09:45:05] INFO     - aegis.node - Privacy budget per round: ε=2.000000, δ=2.000000e-06
[2025-12-11 09:45:05] DEBUG    - aegis.node - Starting: Round 1
[2025-12-11 09:45:05] INFO     - aegis.node - Step 1/5: Local training
[2025-12-11 09:45:05] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-11 09:45:05] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-11 09:45:05] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-11 09:45:05] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-11 09:45:05] DEBUG    - aegis.node - Completed: Round 1 in 0.012s
[2025-12-11 09:45:05] DEBUG    - aegis.node - Starting: Round 2
[2025-12-11 09:45:05] INFO     - aegis.node - Step 1/5: Local training
[2025-12-11 09:45:05] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-11 09:45:05] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-11 09:45:05] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-11 09:45:05] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-11 09:45:05] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-11 09:45:05] INFO     - aegis.audit - Block 1 added to chain: 000016032d00221d...
[2025-12-11 09:45:05] DEBUG    - aegis.node - Completed: Round 2 in 0.033s
[2025-12-11 09:45:05] DEBUG    - aegis.node - Starting: Round 3
[2025-12-11 09:45:05] INFO     - aegis.node - Step 1/5: Local training
[2025-12-11 09:45:05] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-11 09:45:05] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-11 09:45:05] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-11 09:45:05] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-11 09:45:05] DEBUG    - aegis.node - Completed: Round 3 in 0.008s
[2025-12-11 09:45:05] DEBUG    - aegis.node - Starting: Round 4
[2025-12-11 09:45:05] INFO     - aegis.node - Step 1/5: Local training
[2025-12-11 09:45:05] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-11 09:45:05] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-11 09:45:05] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-11 09:45:05] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-11 09:45:05] DEBUG    - aegis.node - Completed: Round 4 in 0.007s
[2025-12-11 09:45:05] DEBUG    - aegis.node - Starting: Round 5
[2025-12-11 09:45:05] INFO     - aegis.node - Step 1/5: Local training
[2025-12-11 09:45:05] INFO     - aegis.node - Step 2/5: Computing statistics
[2025-12-11 09:45:05] INFO     - aegis.node - Step 4/5: Computing private gradients
[2025-12-11 09:45:05] WARNING  - aegis.privacy.dp - Requested ε=2.0000, δ=2.0000e-06 exceeds budget. Using remaining: ε=2.0000, δ=2.0000e-06
[2025-12-11 09:45:05] INFO     - aegis.node - Step 5/5: Local update (no peers)
[2025-12-11 09:45:05] INFO     - aegis.node - Consensus skipped (local mode)
[2025-12-11 09:45:05] INFO     - aegis.audit - Mining block with 3 transactions
[2025-12-11 09:45:05] INFO     - aegis.audit - Block 2 added to chain: 000038190aabb732...
[2025-12-11 09:45:05] DEBUG    - aegis.node - Completed: Round 5 in 0.062s
[2025-12-11 09:45:05] INFO     - aegis.node - ✓ Federated training complete
[2025-12-11 09:49:31] INFO     - aegis.main - Initializing node: Hospital_B on port 5001
[2025-12-11 09:49:31] INFO     - aegis.node - Initializing node: Hospital_B (63196386...)
[2025-12-11 09:49:31] INFO     - aegis.peer.5001 - Peer manager initialized on 0.0.0.0:5001
[2025-12-11 09:49:31] INFO     - aegis.privacy.budget - Budget initialized: ε=10.0, δ=1e-05
[2025-12-11 09:49:31] INFO     - aegis.audit - Genesis block created
[2025-12-11 09:49:31] INFO     - aegis.node - Generating synthetic data
[2025-12-11 09:49:31] INFO     - aegis.medical.data - Generated synthetic medical dataset: 1000 samples, 20 features
[2025-12-11 09:49:31] INFO     - aegis.medical.model - Initialized logistic regression model: 20 features
[2025-12-11 09:49:31] INFO     - aegis.anomaly_detector - Updated local statistics
[2025-12-11 09:49:31] INFO     - aegis.node - ✓ Node initialization complete
[2025-12-11 09:49:31] INFO     - aegis.peer.5001 - ✓ Server started on 0.0.0.0:5001
[2025-12-11 09:49:31] INFO     - aegis.node - ✓ Joined network: f5e2c65b065f020e0e3c55ea2d66cc03
[2025-12-11 09:49:31] INFO     - aegis.main - Joined network: f5e2c65b065f020e0e3c55ea2d66cc03
[2025-12-11 09:49:31] INFO     - aegis.main - Starting interactive shell (type 'help' for commands)
[2025-12-11 09:49:31] INFO     - aegis.node - Interactive shell started (type 'help')
[2025-12-11 09:50:29] INFO     - aegis.peer.5001 - ✓ Added peer ad9c2208... at http://192.168.15.130:5000
[2025-12-11 09:50:29] INFO     - aegis.peer.5000 - ✓ Added peer 63196386... at http://192.168.15.130:5001
[2025-12-11 09:50:29] INFO     - aegis.node - ✓ Bidirectional registration successful
[2025-12-11 09:50:29] INFO     - aegis.node - ✓ Connected to peer: http://192.168.15.130:5000
[2025-12-11 10:09:02] WARNING  - aegis.peer.5001 - Removing unresponsive peer ad9c2208...
[2025-12-11 10:09:02] INFO     - aegis.peer.5001 - ✗ Removed peer ad9c2208...
[2025-12-11 10:09:08] WARNING  - aegis.peer.5000 - Removing unresponsive peer 63196386...
[2025-12-11 10:09:08] INFO     - aegis.peer.5000 - ✗ Removed peer 63196386...
